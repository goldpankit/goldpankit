import{I as v,a as k}from"./InnerRouterViewWindow-3c2303cb.js";import{n as C,_ as y,r as d,o as c,g as D,w as t,a as n,b as a,e as o,t as s,B as V,E as S,C as E,D as I,c as m,F as W,f as B}from"./index-8ca28570.js";import{P as M}from"./Pagination-8e94a10c.js";const N={name:"DatabaseView",props:{database:{required:!0}},methods:{...C(["setCurrentDatabase"]),gotoQueryModels(){this.setCurrentDatabase(this.database.id),this.$router.push({name:"DatabaseQueryModel"})}}},F={class:"toolbar"};function P(e,l,r,$,p,u){const i=d("el-descriptions-item"),_=d("el-button"),h=d("el-descriptions");return c(),D(h,{title:r.database.name},{extra:t(()=>[n("ul",F,[n("li",null,[a(_,{size:"small",onClick:u.gotoQueryModels},{default:t(()=>[o(s(e.$t("database.queryModels")),1)]),_:1},8,["onClick"])]),n("li",null,[a(_,{size:"small",icon:"Edit",onClick:l[0]||(l[0]=f=>e.$emit("edit"))},{default:t(()=>[o(s(e.$t("common.edit")),1)]),_:1})]),n("li",null,[a(_,{size:"small",type:"danger",text:"",onClick:l[1]||(l[1]=f=>e.$emit("delete"))},{default:t(()=>[o(s(e.$t("common.delete")),1)]),_:1})])])]),default:t(()=>[a(i,{label:e.$t("database.databaseType")},{default:t(()=>[o(s(r.database.type),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.host")},{default:t(()=>[o(s(r.database.host),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.port")},{default:t(()=>[o(s(r.database.port),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.schema")},{default:t(()=>[o(s(r.database.schema),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.username")},{default:t(()=>[o(s(r.database.username),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.password")},{default:t(()=>[o("******")]),_:1},8,["label"])]),_:1},8,["title"])}const z=y(N,[["render",P],["__scopeId","data-v-e8c5ce5c"]]);const O={components:{OperaDataSourceWindow:V,Pagination:M,Empty:S,DatabaseView:z,InnerRouterViewWindow:v,InnerRouterView:k},data(){return{databases:[],pagination:{pageIndex:1,capacity:10,total:0}}},methods:{search(){E(this.pagination).then(e=>{this.databases=e.records}).catch(e=>{this.$tip.apiFailed(e)})},edit(e){this.$refs.operaDataSourceWindow.open(e)},deleteDatabase(e){this.deleteConfirm("Do you want to delete the database?").then(()=>{I(e).then(()=>{this.search()}).catch(l=>{this.$tip.apiFailed(l)})}).catch(()=>{})}},created(){this.search()}},Q={class:"form"},q={class:"wrap"},R={class:"tip"},T={class:"database-list-wrap"},L={class:"toolbar"},j={key:0,class:"database-list"};function A(e,l,r,$,p,u){const i=d("el-button"),_=d("DatabaseView"),h=d("Empty"),f=d("Pagination"),w=d("OperaDataSourceWindow");return c(),m("div",Q,[n("div",q,[n("h2",null,s(e.$t("database.databases")),1),n("section",R,s(e.$t("database.tip")),1),n("div",T,[n("ul",L,[n("li",null,[a(i,{type:"primary",onClick:l[0]||(l[0]=b=>e.$refs.operaDataSourceWindow.open())},{default:t(()=>[o(s(e.$t("database.addNewDatabase")),1)]),_:1})])]),p.databases.length>0?(c(),m("ul",j,[(c(!0),m(W,null,B(p.databases,b=>(c(),m("li",{key:b.name},[a(_,{database:b,onEdit:g=>u.edit(b),onDelete:g=>u.deleteDatabase(b.id)},null,8,["database","onEdit","onDelete"])]))),128))])):(c(),D(h,{key:1,description:"No Databases"})),a(f,{pagination:p.pagination},null,8,["pagination"])])]),a(w,{ref:"operaDataSourceWindow",onSuccess:u.search},null,8,["onSuccess"])])}const K=y(O,[["render",A],["__scopeId","data-v-c8a792be"]]);export{K as default};
