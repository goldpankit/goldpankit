import{M as y,V as $,S as F,a as I,p as T}from"./index-2b0b9a3b.js";import{y as V,_ as S,B as k,W as q,r as o,o as u,c,a as s,t as n,g as C,w as a,j as B,b as r,F as h,e as i}from"./index-0fd86c75.js";import{C as R}from"./CompilerSelect-b283bbb9.js";import{F as w}from"./FormItemTip-757dbc9e.js";import"./service-ce6d5fb0.js";function N(e){return V.post("/usr/plugin/create",e,{baseURL:"/remote-api"})}const L={components:{FormTip:k,FormItemTip:w,MainServiceSelect:y,VersionSelect:$,ServiceTypeSelect:F,CompilerSelect:R,SpaceSelect:I,I18nInput:q},data(){return{space:null,service:null,form:{name:"",label:""}}},methods:{getRules(){return{name:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("plugin.name")})}],label:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("plugin.label")})}]}},handleLabelInput(e){this.form.name=T(e,{toneType:"none",type:"array"}).map(t=>t.substr(0,1)).join("")},create(){this.$refs.form.validate(e=>{e&&N({space:this.space,service:this.service,...this.form}).then(()=>{this.$router.push({name:"PluginSettings",query:{space:this.space,service:this.service,plugin:this.form.name}})}).catch(t=>{this.$tip.apiFailed(t)})})}},created(){this.space=this.$route.query.space,this.service=this.$route.query.service,this.$nextTick(()=>{setTimeout(()=>{this.$refs.labelInput.focus()},100)})}},U={class:"form"},j={class:"wrap"},M={class:"opera"};function z(e,t,D,E,l,p){const b=o("FormTip"),d=o("el-input"),f=o("FormItemTip"),_=o("el-form-item"),g=o("el-form"),v=o("el-button");return u(),c("div",U,[s("div",j,[s("h2",null,n(e.$t("plugin.create")),1),l.service!=null?(u(),C(b,{key:0},{default:a(()=>[e.$i18n.locale==="en"?(u(),c(h,{key:0},[i(n(e.$t("plugin.createFor")),1),s("em",null,n(l.service),1),i(". ")],64)):(u(),c(h,{key:1},[i(n(e.$t("plugin.createFor1")),1),s("em",null,n(l.service),1),i(n(e.$t("plugin.createFor2"))+"ã€‚ ",1)],64))]),_:1})):B("",!0),r(g,{ref:"form",model:l.form,rules:p.getRules()},{default:a(()=>[r(_,{label:e.$t("plugin.label"),prop:"label",required:""},{default:a(()=>[r(d,{ref:"labelInput",modelValue:l.form.label,"onUpdate:modelValue":t[0]||(t[0]=m=>l.form.label=m),onInput:p.handleLabelInput},null,8,["modelValue","onInput"]),r(f,{content:e.$t("plugin.labelTip")},null,8,["content"])]),_:1},8,["label"]),r(_,{label:e.$t("plugin.name"),prop:"name",required:""},{default:a(()=>[r(d,{class:"follow-input",modelValue:l.form.name,"onUpdate:modelValue":t[1]||(t[1]=m=>l.form.name=m)},null,8,["modelValue"]),r(f,{content:e.$t("plugin.nameTip")},null,8,["content"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),s("div",M,[r(v,{type:"primary",size:"large",onClick:p.create},{default:a(()=>[i(n(e.$t("plugin.create")),1)]),_:1},8,["onClick"])])])])}const J=S(L,[["render",z],["__scopeId","data-v-b5d3eeb9"]]);export{J as default};
