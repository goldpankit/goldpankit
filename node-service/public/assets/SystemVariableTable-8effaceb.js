import{C as D}from"./CompilerSelect-71d84aa1.js";import{_ as R,r as o,o as c,g as V,w as n,b as a,c as y,F,j as w,a0 as G,K as J,a as r,H as j,t as p,a1 as Y,Q as P,e as T,a2 as ie,a3 as M,f as U,E as H,i as A,p as L,l as x,z as K,A as X,W as se,a4 as W}from"./index-c7362d92.js";import{g as oe,h as re,i as Z,e as B,c as ee,j as ue}from"./service-66c0d1f7.js";import{c as de,d as me,i as te,b as O,s as le,e as ce}from"./plugin-7e165779.js";import{p as pe}from"./service.version-814c0d5c.js";import{a as he}from"./form.check-189b470c.js";import{O as fe,V as Q}from"./ServiceCodeErrorWindow-bff9e5f4.js";const be={name:"InputTypeSelect",props:{withGroup:{default:!1}}};function _e(e,t,l,b,s,i){const u=o("el-option"),d=o("el-select");return c(),V(d,{class:"input-type-select"},{default:n(()=>[a(u,{value:"input",label:"Input"}),a(u,{value:"number_input",label:"Number Input"}),a(u,{value:"textarea",label:"Textarea"}),a(u,{value:"select",label:"Select"}),a(u,{value:"checkbox",label:"Checkbox"}),a(u,{value:"radio",label:"Radio"}),l.withGroup?w("",!0):(c(),y(F,{key:0},[a(u,{value:"datasource",label:"Data Source"}),a(u,{value:"table",label:"Table"}),a(u,{value:"query_model",label:"Query Model"})],64))]),_:1})}const E=R(be,[["render",_e],["__scopeId","data-v-48c58dfb"]]);const ve={name:"SettingFiles",components:{SortableButton:G,CompilerSelect:D,InputTypeSelect:E},props:{space:{required:!0},service:{required:!0},plugin:{required:!1}},data(){return{currentNode:null,files:[]}},computed:{isPlugin(){return this.plugin!=null},unique(){return this.isPlugin?{space:this.space,service:this.service,plugin:this.plugin}:{space:this.space,service:this.service}},fetchFilesApi(){return this.isPlugin?de:oe},saveFileSettingApi(){return this.isPlugin?me:re}},methods:{fetchFiles(){this.fetchFilesApi(this.unique).then(e=>{this.files=e,J(this.files)}).catch(e=>{this.$tip.apiFailed(e)})},saveFileSetting(){this.saveTimeout!=null&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveFileSettingApi({...this.unique,type:this.currentNode.type,path:this.currentNode.path,relativePath:this.currentNode.relativePath,compiler:this.currentNode.compiler,enableExpress:this.currentNode.enableExpress,variables:this.currentNode.variables.filter(e=>e.name.trim().length>0)}).then(()=>{}).catch(e=>{this.$tip.apiFailed(e)})},300)},createVariable(){this.currentNode.variables.push({name:"",value:"",compiler:"static",remark:""})},deleteVariable(e){this.currentNode.variables.splice(e,1)},handleNodeClick(e){this.currentNode=e},isFlagFile(e){return e.compiler!=null&&e.compiler!==""||e.enableExpress!=null&&e.enableExpress!==""||e.variables.length>0},handleSorted(e){this.currentNode.variables=[],this.$nextTick(()=>{this.currentNode.variables=e,this.saveFileSetting()})}},created(){this.fetchFiles()}},ge={class:"tree"},ye={class:"files-wrap"},Ve={class:"search-wrap"},Ce={class:"node-label"},ke={class:"file-setting"},Se={class:"content-wrap"},Te={key:1,class:"setting-holder"},Ie={class:"holder-wrap"};function Re(e,t,l,b,s,i){const u=o("el-input"),d=o("Document"),h=o("el-icon"),C=o("Folder"),I=o("el-tree"),f=o("CompilerSelect"),k=o("el-form-item"),N=o("el-form");return c(),y("div",ge,[r("div",ye,[r("div",Ve,[a(u,{placeholder:e.$t("service.settings.file.filterKeyword")},null,8,["placeholder"])]),a(I,{data:s.files,"highlight-current":!0,"empty-text":e.$t("service.settings.file.noFiles"),onNodeClick:i.handleNodeClick},{default:n(({node:_,data:v})=>[r("span",Ce,[v.type==="FILE"?(c(),V(h,{key:0},{default:n(()=>[a(d)]),_:1})):v.type==="DIRECTORY"?(c(),V(h,{key:1},{default:n(()=>[a(C)]),_:1})):w("",!0),r("span",{class:j(["filename",{"flag-file":i.isFlagFile(v)}])},p(v.label),3)])]),_:1},8,["data","empty-text","onNodeClick"])]),r("div",ke,[r("h4",null,p(e.$t("service.settings.file.fileSetting")),1),r("div",Se,[s.currentNode!=null?(c(),V(N,{key:0},{default:n(()=>[a(k,{label:e.$t("service.settings.file.compiler")},{default:n(()=>[a(f,{modelValue:s.currentNode.compiler,"onUpdate:modelValue":t[0]||(t[0]=_=>s.currentNode.compiler=_),"with-follow-service":!0,onChange:i.saveFileSetting},null,8,["modelValue","onChange"])]),_:1},8,["label"]),a(k,{label:e.$t("service.settings.file.enableExpress")},{default:n(()=>[a(u,{modelValue:s.currentNode.enableExpress,"onUpdate:modelValue":t[1]||(t[1]=_=>s.currentNode.enableExpress=_),type:"textarea",rows:8,placeholder:e.$t("service.settings.file.enableExpressHolder"),onInput:i.saveFileSetting},null,8,["modelValue","placeholder","onInput"])]),_:1},8,["label"])]),_:1})):(c(),y("div",Te,[r("div",Ie,[r("h5",null,p(e.$t("service.settings.file.fileSetting")),1),r("p",null,p(e.$t("service.settings.file.fileSettingHolder")),1)])]))])])])}const Il=R(ve,[["render",Re],["__scopeId","data-v-45f8d15f"]]);const Ne={name:"InitializeView",components:{DatabaseTypeSelect:Y,CompilerSelect:D,DirectorySelect:P},props:{spaceName:{required:!0},serviceName:{required:!0},serviceLabel:{required:!1},pluginName:{required:!1},pluginLabel:{required:!1}},data(){return{form:{space:this.spaceName,name:null,version:"1.0.0",compiler:"static",supportedDatabases:[],codespace:""}}},computed:{isInitPlugin(){return this.pluginName!=null}},methods:{initialize(){let e;this.isInitPlugin?e=te({...this.form,service:this.serviceName,name:this.pluginName,label:this.pluginLabel}):e=Z({...this.form,name:this.serviceName,label:this.serviceLabel}),e.then(()=>{this.$emit("initialized",this.form)}).catch(t=>{this.$tip.apiFailed(t)})},fetchConfig(e){let t;this.isInitPlugin?t=O({codespace:e}):t=B({codespace:e}),t.then(l=>{l!=null&&(this.form.version=l.version||this.form.version,this.form.compiler=l.compiler||this.form.compiler,this.form.supportedDatabases=l.supportedDatabases||this.form.supportedDatabases)}).catch(l=>{this.$tip.apiFailed(l)})}}},we={class:"initialize-wrap"},Fe={class:"tip"},Ae={class:"directory-select-wrap"},$e={class:"opera-bottom"};function ze(e,t,l,b,s,i){const u=o("DirectorySelect"),d=o("el-button");return c(),y("div",we,[r("div",Fe,[r("h3",null,p(e.$t("service.settings.initialize.initializeService")),1),r("p",null,p(e.$t("service.settings.initialize.initializeServiceTip")),1)]),r("div",Ae,[a(u,{modelValue:s.form.codespace,"onUpdate:modelValue":t[0]||(t[0]=h=>s.form.codespace=h),title:e.$t("service.settings.initialize.selectServiceCodespace"),height:"235px",onChange:i.fetchConfig},null,8,["modelValue","title","onChange"])]),r("div",$e,[a(d,{type:"primary",size:"large",onClick:i.initialize},{default:n(()=>[T(p(e.$t("service.settings.initialize.initializeService")),1)]),_:1},8,["onClick"])])])}const Rl=R(Ne,[["render",ze],["__scopeId","data-v-a6326b72"]]);const De={name:"BuildCommandTypeSelect"};function qe(e,t,l,b,s,i){const u=o("el-option"),d=o("el-select");return c(),V(d,{class:"build-command-type-select"},{default:n(()=>[a(u,{value:"Node",label:"Node"}),a(u,{value:"MySQL",label:"MySQL"})]),_:1})}const Ue=R(De,[["render",qe],["__scopeId","data-v-3b21c3bd"]]);const Be={name:"ServiceFileSelectWindow",props:{title:{default:"Select Service File"},serviceConfig:{required:!0}},data(){return{visible:!1,paths:[],files:[],selectedFilepath:null}},methods:{open(){this.visible=!0,this.paths=[this.__getProjectName()],this.__fetchFiles(),this.selectedFilepath=null},confirmSelect(){this.visible=!1;let e=`${this.paths.slice(1).join("/")}/${this.selectedFilepath}`;e.startsWith("/")||(e="/"+e),this.$emit("change",e)},cancelSelect(){this.visible=!1},changePath(e){if(e===this.paths.length-1)return;const t=this.paths.slice(0,e+1);this.__fetchFiles(t,()=>{this.paths.splice(e+1),this.selectedFilepath=null})},openOrSelectFile(e){if(e.type==="DIRECTORY"){const t=JSON.parse(JSON.stringify(this.paths));t.push(e.path),this.__fetchFiles(t,()=>{this.paths.push(e.path),this.selectedFilepath=null});return}this.selectedFilepath=e.path},__fetchFiles(e,t){ie(this.__getAbsolutePath(e)).then(l=>{this.files=l,J(this.files),t&&t()}).catch(l=>{this.$tip.apiFailed(l)})},__getProjectName(){return M.split(this.serviceConfig.codespace).pop()},__getAbsolutePath(e){e==null&&(e=JSON.parse(JSON.stringify(this.paths))),e.shift();let t=M.join([this.serviceConfig.codespace,...e]);return this.serviceConfig.translator.settings.length>0&&(t=M.join([this.serviceConfig.codespace,this.serviceConfig.translator.output,...e])),t}}},Oe=["id"],Ee={class:"paths"},Me=["onClick"],je={class:"files"},Pe=["onClick"],Le={class:"opera"};function xe(e,t,l,b,s,i){const u=o("el-button"),d=o("Folder"),h=o("Document"),C=o("el-icon"),I=o("el-dialog");return c(),V(I,{modelValue:s.visible,"onUpdate:modelValue":t[0]||(t[0]=f=>s.visible=f),"show-close":!1,"custom-class":"service-file-select-window","append-to-body":""},{header:n(({close:f,titleId:k,titleClass:N})=>[r("h4",{id:k,class:j(N)},p(l.title),11,Oe),a(u,{class:"button-icon",icon:"Refresh",onClick:i.__fetchFiles},null,8,["onClick"])]),default:n(()=>[r("ul",Ee,[(c(!0),y(F,null,U(s.paths,(f,k)=>(c(),y("li",{key:f,onClick:N=>i.changePath(k)},p(f),9,Me))),128))]),r("div",je,[r("ul",null,[(c(!0),y(F,null,U(s.files,f=>(c(),y("li",{key:f.path,class:j({"is-file":f.type==="FILE",selected:s.selectedFilepath===f.path}),onClick:k=>i.openOrSelectFile(f)},[a(C,null,{default:n(()=>[f.type==="DIRECTORY"?(c(),V(d,{key:0})):(c(),V(h,{key:1}))]),_:2},1024),r("p",null,p(f.path),1)],10,Pe))),128))])]),r("div",Le,[a(u,{size:"large",onClick:i.cancelSelect},{default:n(()=>[T("Cancel")]),_:1},8,["onClick"]),a(u,{type:"primary",size:"large",disabled:s.selectedFilepath==null,onClick:i.confirmSelect},{default:n(()=>[T("Confirm Select")]),_:1},8,["disabled","onClick"])])]),_:1},8,["modelValue"])}const Qe=R(Be,[["render",xe]]);const We={name:"BuildList",components:{ServiceFileSelectWindow:Qe,DirectorySelect:P,Empty:H,BuildCommandTypeSelect:Ue},props:{builds:{required:!0,type:Array},withUnbuild:{default:!1},serviceConfig:{required:!0}},data(){return{actives:[],varIndex:1,selectFileData:{currentBuild:null}}},watch:{builds:{immediate:!0,handler(){this.__handleBuildList("builds")}},unbuilds:{immediate:!0,handler(){this.__handleBuildList("unbuilds")}}},methods:{handleFileChange(e){this.selectFileData.currentBuild.__filepath=e,this.handleSave()},create(){const e=""+Math.random();this.builds.push({id:e,name:this.__generateBuildName(),type:"Node",contentType:"string",content:"",__readonly:!1,__filepath:""}),this.actives.push(e)},handleChange(e){for(const t of this.builds){const l=e.find(b=>b===t.id)!=null;t.__readonly=!l}},handleSave(){this.$emit("save")},deleteBuild(e){this.builds.splice(e,1),this.handleSave()},openSelectFileWindow(e){this.selectFileData.currentBuild=e,this.$refs.serviceFileSelectWindow.open()},__generateBuildName(){let e;for(;;)if(e=`${this.withUnbuild?"un":""}build${this.varIndex}`,this.varIndex++,this.builds.findIndex(t=>t.name===e)===-1)return e},__handleBuildList(e){this[e]!=null&&this[e].forEach(t=>{t.id=""+Math.random(),t.contentType==="file"&&(t.__filepath=t.content,t.content=""),t.__readonly=!0})}}},Ge={class:"service-build-list"},Je={class:"toolbar"},Ye={key:0},He={key:1},Ke={class:"title-wrap"},Xe={key:0,class:"view"},Ze={class:"name"},et={class:"type"},tt={key:1,class:"edit"},lt={class:"opera"},at=["onClick"],nt={key:0,class:"holder"},it={key:1};function st(e,t,l,b,s,i){const u=o("el-button"),d=o("el-input"),h=o("el-form-item"),C=o("BuildCommandTypeSelect"),I=o("el-form"),f=o("el-tab-pane"),k=o("el-tabs"),N=o("el-collapse-item"),_=o("el-collapse"),v=o("Empty"),g=o("ServiceFileSelectWindow");return c(),y("div",Ge,[r("div",Je,[l.withUnbuild?(c(),y("p",Ye,p(e.$t("service.settings.build.unBuildTip")),1)):(c(),y("p",He,p(e.$t("service.settings.build.buildTip")),1)),a(u,{type:"primary",onClick:i.create},{default:n(()=>[T(p(e.$t("common.create")),1)]),_:1},8,["onClick"])]),l.builds.length>0?(c(),V(_,{key:0,modelValue:s.actives,"onUpdate:modelValue":t[2]||(t[2]=S=>s.actives=S),onChange:i.handleChange},{default:n(()=>[(c(!0),y(F,null,U(l.builds,(S,q)=>(c(),V(N,{key:S.id,name:S.id},{title:n(()=>[r("div",Ke,[S.__readonly?(c(),y("div",Xe,[r("p",Ze,p(S.name),1),r("p",et,p(S.type),1)])):(c(),y("div",tt,[a(I,{model:S},{default:n(()=>[a(h,{label:e.$t("common.name"),required:""},{default:n(()=>[a(d,{class:"name",modelValue:S.name,"onUpdate:modelValue":m=>S.name=m,onClick:t[0]||(t[0]=A(()=>{},["stop"])),onKeypress:t[1]||(t[1]=A(()=>{},["stop"])),onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1032,["label"]),a(h,{label:e.$t("common.type"),required:""},{default:n(()=>[a(C,{class:"type",modelValue:S.type,"onUpdate:modelValue":m=>S.type=m,onChange:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"])]),_:2},1032,["model"])])),r("div",lt,[a(u,{icon:"Delete",onClick:A(m=>i.deleteBuild(q),["stop"])},{default:n(()=>[T(p(e.$t("common.delete")),1)]),_:2},1032,["onClick"])])])]),default:n(()=>[a(k,{modelValue:S.contentType,"onUpdate:modelValue":m=>S.contentType=m},{default:n(()=>[a(f,{name:"string",label:e.$t("service.settings.build.input")},{default:n(()=>[a(d,{modelValue:S.content,"onUpdate:modelValue":m=>S.content=m,type:"textarea",placeholder:e.$t("service.settings.build.buildCommand"),rows:5,onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])]),_:2},1032,["label"]),a(f,{name:"file",label:e.$t("service.settings.build.file")},{default:n(()=>[r("div",{class:"select-holder",onClick:m=>i.openSelectFileWindow(S)},[S.__filepath==null||S.__filepath===""?(c(),y("p",nt,p(e.$t("common.clickToSelectFile")),1)):(c(),y("p",it,p(S.__filepath),1))],8,at)]),_:2},1032,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","onChange"])):(c(),V(v,{key:1})),a(g,{ref:"serviceFileSelectWindow","service-config":l.serviceConfig,onChange:i.handleFileChange},null,8,["service-config","onChange"])])}const ot=R(We,[["render",st],["__scopeId","data-v-9f0c30c7"]]);const rt={name:"TranslatorTypeSelect"};function ut(e,t,l,b,s,i){const u=o("el-option"),d=o("el-select");return c(),V(d,{class:"translator-type-select"},{default:n(()=>[a(u,{value:"pattern",label:e.$t("service.settings.translator.pattern")},null,8,["label"]),a(u,{value:"code",label:e.$t("service.settings.translator.code")},null,8,["label"])]),_:1})}const dt=R(rt,[["render",ut],["__scopeId","data-v-f6d00470"]]);const mt={name:"TranslatorList",components:{TranslatorTypeSelect:dt,Empty:H},props:{space:{required:!0},service:{required:!0},plugin:{required:!0},translator:{required:!0}},data(){return{actives:[],varIndex:1}},computed:{translators(){return this.translator.settings}},watch:{translators:{immediate:!0,handler(){this.translators.forEach(e=>{e.id=""+Math.random(),e.__readonly=!0})}}},methods:{add(){const e=""+Math.random();this.translator.settings.push({id:e,name:this.__generateTranslatorName(),type:"pattern",path:".*",source:"",target:"",code:"  return {filepath: filepath, content: content};",__readonly:!1}),this.actives.push(e)},deleteTranslator(e){this.translator.settings.splice(e,1),this.handleSave()},handleChange(e){for(const t of this.translators){const l=e.find(b=>b===t.id)!=null;t.__readonly=!l}},handleSave(){this.$emit("save")},__generateTranslatorName(){let e;for(;;)if(e=`translator${this.varIndex}`,this.varIndex++,this.translators.findIndex(t=>t.name===e)===-1)return e}}},ae=e=>(L("data-v-6ba15df0"),e=e(),x(),e),ct={class:"translator-setting"},pt={class:"toolbar"},ht={class:"opera"},ft={class:"title-wrap"},bt={key:0,class:"view"},_t={class:"name"},vt={class:"path"},gt={class:"type"},yt={key:1,class:"edit"},Vt={class:"opera"},Ct=ae(()=>r("p",{class:"code"},[r("em",{class:"keyword"},"function"),T(),r("em",null,"translate"),T(" ("),r("em",null,"filepath"),T(", "),r("em",null,"content"),T(", "),r("em",null,"fileSetting"),T(") {")],-1)),kt=ae(()=>r("p",null,"}",-1));function St(e,t,l,b,s,i){const u=o("el-button"),d=o("el-input"),h=o("el-form-item"),C=o("TranslatorTypeSelect"),I=o("el-form"),f=o("el-collapse-item"),k=o("el-collapse"),N=o("Empty");return c(),y("div",ct,[r("div",pt,[r("p",null,p(e.$t("service.settings.translator.translatorTip")),1),r("div",ht,[a(u,{type:"primary",onClick:i.add},{default:n(()=>[T(p(e.$t("common.add")),1)]),_:1},8,["onClick"])])]),i.translators.length>0?(c(),V(k,{key:0,modelValue:s.actives,"onUpdate:modelValue":t[4]||(t[4]=_=>s.actives=_),onChange:i.handleChange},{default:n(()=>[(c(!0),y(F,null,U(i.translators,(_,v)=>(c(),V(f,{key:_.id,name:_.id},{title:n(()=>[r("div",ft,[_.__readonly?(c(),y("div",bt,[r("p",_t,p(_.name),1),r("p",vt,p(_.path),1),r("p",gt,p(_.type),1)])):(c(),y("div",yt,[a(I,{model:_},{default:n(()=>[a(h,{label:e.$t("common.name"),required:""},{default:n(()=>[a(d,{class:"name",modelValue:_.name,"onUpdate:modelValue":g=>_.name=g,onClick:t[0]||(t[0]=A(()=>{},["stop"])),onKeypress:t[1]||(t[1]=A(()=>{},["stop"])),onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1032,["label"]),a(h,{label:e.$t("service.settings.translator.path"),required:""},{default:n(()=>[a(d,{class:"path",modelValue:_.path,"onUpdate:modelValue":g=>_.path=g,onClick:t[2]||(t[2]=A(()=>{},["stop"])),onKeypress:t[3]||(t[3]=A(()=>{},["stop"])),onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1032,["label"]),a(h,{label:e.$t("service.settings.translator.type"),required:""},{default:n(()=>[a(C,{class:"type",modelValue:_.type,"onUpdate:modelValue":g=>_.type=g,onChange:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"])]),_:2},1032,["model"])])),r("div",Vt,[a(u,{icon:"Delete",onClick:A(g=>i.deleteTranslator(v),["stop"])},{default:n(()=>[T("Delete")]),_:2},1032,["onClick"])])])]),default:n(()=>[_.type==="pattern"?(c(),V(I,{key:0},{default:n(()=>[a(h,{label:"Source",required:""},{default:n(()=>[a(d,{modelValue:_.source,"onUpdate:modelValue":g=>_.source=g,type:"textarea",rows:1,onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),a(h,{label:"Target",required:""},{default:n(()=>[a(d,{modelValue:_.target,"onUpdate:modelValue":g=>_.target=g,type:"textarea",rows:1,onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024)]),_:2},1024)):_.type==="code"?(c(),y(F,{key:1},[Ct,a(d,{modelValue:_.code,"onUpdate:modelValue":g=>_.code=g,type:"textarea",rows:5,onInput:i.handleSave},null,8,["modelValue","onUpdate:modelValue","onInput"]),kt],64)):w("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","onChange"])):(c(),V(N,{key:1}))])}const Tt=R(mt,[["render",St],["__scopeId","data-v-6ba15df0"]]),It="data:image/png;base64,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";const Rt={name:"BasicSetting",components:{TranslatorList:Tt,BuildList:ot,DirectorySelect:P,DatabaseTypeSelect:Y,CompilerSelect:D},props:{space:{required:!0},service:{required:!0},plugin:{required:!1},serviceConfig:{}},data(){return{newCodespace:{changing:!1,value:""},originForm:null,form:{name:"",label:"",version:"",private:!1,receivable:!1,compiler:"",introduce:"",repository:"",supportedDatabases:[],tableFieldDefinitions:[],builds:[],unbuilds:[],prices:[{type:"free",value:0}],translator:{output:"",settings:[]},codespace:""}}},computed:{isPlugin(){return this.plugin!=null}},methods:{initData(){for(const e in this.form)e==="label"&&(this.form.label=this.serviceConfig.label||this.serviceConfig.name||this.form.label),this.form[e]=this.serviceConfig[e]||this.form[e];this.originForm=JSON.parse(JSON.stringify(this.form))},initialize(){this.form.codespace=this.newCodespace.value;let e;this.isPlugin?e=te({space:this.space,service:this.service,name:this.plugin,...this.form}):e=Z({space:this.space,name:this.service,...this.form}),e.then(()=>{this.newCodespace.changing=!1,this.$emit("initialized",this.form)}).catch(t=>{this.$tip.apiFailed(t)})},changePriceType(e){e==="free"&&(this.form.prices[0].value=0),this.saveConfig()},changeCodespace(){this.newCodespace.changing=!0,this.newCodespace.value=this.form.codespace},fetchConfig(e){let t;this.isPlugin?t=O({codespace:e}):t=B({codespace:e}),t.then(l=>{l!=null&&(this.form.name=l.name||this.form.name,this.form.label=l.label||l.name||this.form.label,this.form.version=l.version||this.form.version,this.form.introduce=l.introduce||this.form.introduce,this.form.compiler=l.compiler||this.form.compiler,this.form.prices=l.prices||this.form.prices,this.form.supportedDatabases=l.supportedDatabases||this.form.supportedDatabases,this.form.builds=l.builds||this.form.builds,this.form.unbuilds=l.unbuilds||this.form.unbuilds,this.form.translator=l.translator||this.form.translator)}).catch(l=>{this.$tip.apiFailed(l)})},saveConfig(){if(this.newCodespace.changing)return;let e,t;this.isPlugin?(t=le,e={space:this.space,service:this.service,plugin:this.plugin}):(t=ee,e={space:this.space,service:this.service}),t({...e,...this.form,translator:{...this.form.translator,settings:this.form.translator.settings.filter(l=>l.type==="code"&&l.code.trim().length>0||l.type==="pattern"&&l.source.trim()!==""&&l.target.trim()!=="").map(l=>({name:l.name,path:l.path.trim().length===0?".*":l.path,type:l.type,source:l.type==="pattern"?l.source:"",target:l.type==="pattern"?l.target:"",code:l.type==="code"?l.code:""}))},builds:this.form.builds.map(l=>({name:l.name,type:l.type,content:l.contentType==="file"?l.__filepath:l.content,contentType:l.contentType})),unbuilds:this.form.unbuilds.map(l=>({name:l.name,type:l.type,content:l.contentType==="file"?l.__filepath:l.content,contentType:l.contentType}))}).then(()=>{this.originForm=JSON.parse(JSON.stringify(this.form))}).catch(l=>{this.$tip.apiFailed(l)})}},created(){this.initData()}},Nt=e=>(L("data-v-f65b92b4"),e=e(),x(),e),wt={class:"basic-setting"},Ft={class:"wrap"},At=Nt(()=>r("span",null,[r("img",{src:It})],-1)),$t={key:0,class:"codespace-wrap"},zt={key:0,class:"opera-wrap"};function Dt(e,t,l,b,s,i){const u=o("el-input"),d=o("el-form-item"),h=o("CompilerSelect"),C=o("DatabaseTypeSelect"),I=o("el-radio-button"),f=o("el-radio-group"),k=o("el-input-number"),N=o("el-checkbox"),_=o("TranslatorList"),v=o("BuildList"),g=o("el-button"),S=o("DirectorySelect"),q=o("el-form");return c(),y("div",wt,[r("div",Ft,[a(q,{model:s.form},{default:n(()=>[l.plugin==null?(c(),y(F,{key:0},[a(d,{label:e.$t("service.settings.name"),prop:"version",required:""},{default:n(()=>[a(u,{modelValue:s.form.name,"onUpdate:modelValue":t[0]||(t[0]=m=>s.form.name=m),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.label"),prop:"version",required:""},{default:n(()=>[a(u,{modelValue:s.form.label,"onUpdate:modelValue":t[1]||(t[1]=m=>s.form.label=m),onInput:i.saveConfig},null,8,["modelValue","onInput"])]),_:1},8,["label"])],64)):(c(),y(F,{key:1},[a(d,{label:e.$t("plugin.name"),prop:"version",required:""},{default:n(()=>[a(u,{modelValue:s.form.name,"onUpdate:modelValue":t[2]||(t[2]=m=>s.form.name=m),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),a(d,{label:e.$t("plugin.label"),prop:"version",required:""},{default:n(()=>[a(u,{modelValue:s.form.label,"onUpdate:modelValue":t[3]||(t[3]=m=>s.form.label=m),onInput:i.saveConfig},null,8,["modelValue","onInput"])]),_:1},8,["label"])],64)),a(d,{label:e.$t("service.settings.version"),prop:"version",required:""},{default:n(()=>[a(u,{modelValue:s.form.version,"onUpdate:modelValue":t[4]||(t[4]=m=>s.form.version=m),onInput:i.saveConfig},null,8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.compiler"),prop:"compiler",required:""},{default:n(()=>[a(h,{modelValue:s.form.compiler,"onUpdate:modelValue":t[5]||(t[5]=m=>s.form.compiler=m),onChange:i.saveConfig},null,8,["modelValue","onChange"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.supportedDatabases"),prop:"supportedDatabases"},{default:n(()=>[a(C,{modelValue:s.form.supportedDatabases,"onUpdate:modelValue":t[6]||(t[6]=m=>s.form.supportedDatabases=m),onChange:i.saveConfig},null,8,["modelValue","onChange"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.repository"),prop:"repository"},{default:n(()=>[a(u,{modelValue:s.form.repository,"onUpdate:modelValue":t[7]||(t[7]=m=>s.form.repository=m),onInput:i.saveConfig},null,8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.introduce"),prop:"introduce",required:""},{default:n(()=>[a(u,{type:"textarea",rows:5,modelValue:s.form.introduce,"onUpdate:modelValue":t[8]||(t[8]=m=>s.form.introduce=m),onInput:i.saveConfig},null,8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.charge"),prop:"prices[0].type",required:""},{default:n(()=>[a(f,{modelValue:s.form.prices[0].type,"onUpdate:modelValue":t[9]||(t[9]=m=>s.form.prices[0].type=m),onChange:i.changePriceType},{default:n(()=>[(c(!0),y(F,null,U(e.$const.getServiceLeaseTypes(e.$t),m=>(c(),V(I,{key:m.code,label:m.code},{default:n(()=>[T(p(m.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),s.form.prices[0].type!=="free"?(c(),V(d,{key:2,label:"Price",prop:"prices[0].value",class:"item-price",required:""},{default:n(()=>[At,a(k,{controls:!1,modelValue:s.form.prices[0].value,"onUpdate:modelValue":t[10]||(t[10]=m=>s.form.prices[0].value=m),onInput:i.saveConfig},null,8,["modelValue","onInput"])]),_:1})):w("",!0),a(d,{label:e.$t("service.settings.otherSettings"),class:"item-other-settings"},{default:n(()=>[r("div",null,[a(N,{modelValue:s.form.private,"onUpdate:modelValue":t[11]||(t[11]=m=>s.form.private=m),label:"Is a private service",onChange:i.saveConfig},null,8,["modelValue","onChange"])])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.translator.translator"),prop:"translator"},{default:n(()=>[a(_,{space:l.space,service:l.service,plugin:l.plugin,translator:s.form.translator,onSave:i.saveConfig},null,8,["space","service","plugin","translator","onSave"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.installBuilds"),prop:"builds"},{default:n(()=>[a(v,{builds:s.form.builds,"service-config":l.serviceConfig,onSave:i.saveConfig},null,8,["builds","service-config","onSave"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.uninstallBuilds"),prop:"unbuilds"},{default:n(()=>[a(v,{builds:s.form.unbuilds,"with-unbuild":!0,"service-config":l.serviceConfig,onSave:i.saveConfig},null,8,["builds","service-config","onSave"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.codespace"),prop:"codespace"},{default:n(()=>[s.newCodespace.changing?(c(),V(S,{key:1,title:e.$t("service.settings.selectNewCodespace"),modelValue:s.newCodespace.value,"onUpdate:modelValue":t[12]||(t[12]=m=>s.newCodespace.value=m),onChange:i.fetchConfig},null,8,["title","modelValue","onChange"])):(c(),y("div",$t,[r("p",null,p(s.form.codespace),1),a(g,{type:"primary",onClick:i.changeCodespace},{default:n(()=>[T(p(e.$t("service.settings.changeCodespace")),1)]),_:1},8,["onClick"])]))]),_:1},8,["label"])]),_:1},8,["model"]),s.newCodespace.changing?(c(),y("div",zt,[a(g,{size:"large",onClick:t[13]||(t[13]=m=>s.newCodespace.changing=!1)},{default:n(()=>[T(p(e.$t("common.cancel")),1)]),_:1}),a(g,{size:"large",type:"primary",onClick:i.initialize},{default:n(()=>[T(p(e.$t("service.settings.reinitialize")),1)]),_:1},8,["onClick"])])):w("",!0)])])}const Nl=R(Rt,[["render",Dt],["__scopeId","data-v-f65b92b4"]]),qt={name:"PublishWindow",data(){return{visible:!1,isWorking:!1,space:null,service:null,plugin:null,form:{version:"",publishDescription:""}}},computed:{isPlugin(){return this.plugin!=null},unique(){return this.isPlugin?{space:this.space,service:this.service,plugin:this.plugin}:{space:this.space,service:this.service}},fetchConfigApi(){return this.isPlugin?B:O},saveConfigApi(){return this.isPlugin?le:ee}},methods:{open(e,t,l){this.space=e,this.service=t,this.plugin=l,this.visible=!0,this.fetchConfig()},getRules(){return{version:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("service.versionNumber")})},{validator:he,message:this.$t("form.isIncorrect",{field:this.$t("service.versionNumber")})}],publishDescription:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("service.versionDescription")}),trigger:"blur"}]}},fetchConfig(){this.fetchConfigApi(this.unique).then(e=>{this.form.version=e.version}).catch(e=>{this.$tip.apiFailed(e)})},saveConfig(){this.saveConfigApi({...this.unique,version:this.form.version}).catch(e=>{this.$tip.apiFailed(e)})},publish(){this.$refs.form.validate().then(()=>{this.isWorking||(this.isWorking=!0,pe({...this.unique,publishDescription:this.form.publishDescription}).then(()=>{this.visible=!1,this.$message.success("发布成功")}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.isWorking=!1}))})}}},Ut={class:"dialog-footer"};function Bt(e,t,l,b,s,i){const u=o("el-input"),d=o("el-form-item"),h=o("el-form"),C=o("el-button"),I=o("el-dialog"),f=K("loading");return c(),V(I,{modelValue:s.visible,"onUpdate:modelValue":t[3]||(t[3]=k=>s.visible=k),class:"publish-window",title:e.$t("service.settings.publishVersion"),width:"500px",draggable:"","close-on-press-escape":!1,"close-on-click-modal":!1},{footer:n(()=>[r("span",Ut,[a(C,{onClick:t[2]||(t[2]=k=>s.visible=!1)},{default:n(()=>[T(p(e.$t("common.cancel")),1)]),_:1}),a(C,{type:"primary",disabled:s.isWorking,onClick:i.publish},{default:n(()=>[T(p(e.$t("service.settings.publish")),1)]),_:1},8,["disabled","onClick"])])]),default:n(()=>[X((c(),V(h,{ref:"form",model:s.form,rules:i.getRules()},{default:n(()=>[a(d,{label:e.$t("service.versionNumber"),prop:"version",required:""},{default:n(()=>[a(u,{modelValue:s.form.version,"onUpdate:modelValue":t[0]||(t[0]=k=>s.form.version=k),onInput:i.saveConfig},{prefix:n(()=>[T("v")]),_:1},8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.versionDescription"),prop:"publishDescription",required:""},{default:n(()=>[a(u,{type:"textarea",rows:5,modelValue:s.form.publishDescription,"onUpdate:modelValue":t[1]||(t[1]=k=>s.form.publishDescription=k)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[f,s.isWorking]])]),_:1},8,["modelValue","title"])}const wl=R(qt,[["render",Bt]]);const Ot={name:"OptionSettingWindow",components:{OptionValueInput:fe},data(){return{visible:!1,option:null}},methods:{open(e){this.option=e,this.visible=!0},add(){this.option.settings.push({label:"",name:"",inputType:"input",required:!0,defaultValue:""})},deleteSetting(e){this.option.settings.splice(e,1),this.emitChange()},emitChange(){this.$emit("change")}}},Et={class:"toolbar"};function Mt(e,t,l,b,s,i){const u=o("el-button"),d=o("el-input"),h=o("el-table-column"),C=o("el-option"),I=o("el-select"),f=o("el-switch"),k=o("OptionValueInput"),N=o("el-table"),_=o("el-dialog");return c(),V(_,{modelValue:s.visible,"onUpdate:modelValue":t[0]||(t[0]=v=>s.visible=v),title:"Option Settings","append-to-body":"","custom-class":"option-setting-window"},{default:n(()=>[r("div",Et,[a(u,{icon:"Plus",type:"primary",onClick:i.add},{default:n(()=>[T("Add")]),_:1},8,["onClick"])]),a(N,{data:s.option.settings},{default:n(()=>[a(h,{prop:"label",label:"Label"},{default:n(({row:v})=>[a(d,{modelValue:v.label,"onUpdate:modelValue":g=>v.label=g,onInput:i.emitChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(h,{prop:"name",label:"Name"},{default:n(({row:v})=>[a(d,{modelValue:v.name,"onUpdate:modelValue":g=>v.name=g,onInput:i.emitChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(h,{prop:"inputType",label:"Input Type"},{default:n(({row:v})=>[a(I,{modelValue:v.inputType,"onUpdate:modelValue":g=>v.inputType=g,onChange:i.emitChange},{default:n(()=>[a(C,{value:"input",label:"Input"}),a(C,{value:"number_input",label:"Number Input"}),a(C,{value:"textarea",label:"Textarea"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(h,{prop:"required",label:"Input Type"},{default:n(({row:v})=>[a(f,{modelValue:v.required,"onUpdate:modelValue":g=>v.required=g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(h,{prop:"defaultValue",label:"Default Value"},{default:n(({row:v})=>[a(k,{"option-setting":v,modelValue:v.defaultValue,"onUpdate:modelValue":g=>v.defaultValue=g,onInput:i.emitChange},null,8,["option-setting","modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(h,{width:"60px"},{default:n(({row:v,$index:g})=>[a(u,{icon:"Delete",onClick:S=>i.deleteSetting(g)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])}const jt=R(Ot,[["render",Mt]]),Pt={name:"VariableSettingForm",components:{OptionSettingWindow:jt,SortableButton:G,VariableInput:Q,CompilerSelect:D,InputTypeSelect:E},props:{variable:{required:!0},rootVariable:{required:!0},variableGroup:{default:!1}},computed:{withGroup(){return this.variableGroup!=null}},watch:{"variable.defaultValue":function(){this.handleFieldVariableValues(),this.handleChange()},"variable.name":function(){this.handleFieldVariableValues(),this.handleChange()}},methods:{handleChange(){this.$emit("change")},handleDefaultValueChange(){this.handleFieldVariableValues(),this.$emit("change")},handleFieldVariableValues(){if(this.rootVariable!==this.variable&&(this.rootVariable.inputType==="query_model"||this.rootVariable.inputType==="table"))for(const e of this.rootVariable.children)for(const t of e.defaultValue){t[this.variable.name]=this.variable.defaultValue;for(const l in t){if(l==="origin")continue;e.children.find(s=>s.name===l)==null&&!t.origin.hasOwnProperty(l)&&delete t[l]}}},createOption(){this.variable.options.push({value:"",label:"",remark:"",settings:[]})},deleteOption(e){this.variable.options.splice(e,1)},handleInputTypeChange(){let e=this.variable.defaultValue;if(e!=null&&e.value!=null&&(e=e.value),e instanceof Array&&(e=e[0]),typeof e=="number"&&(e=e+""),this.variable.inputType==="number_input"){let t=Number(parseInt(e));isNaN(t)&&(t=0),this.variable.defaultValue=t}else if(this.variable.inputType==="select"){const t=this.variable.options.find(l=>l.value===e);this.variable.defaultValue={value:t==null?null:e,settings:t==null?[]:t.settings}}else this.variable.inputType==="checkbox"?this.variable.defaultValue=[]:this.variable.inputType==="radio"?this.variable.defaultValue="":this.variable.inputType==="datasource"||this.variable.inputType==="table"||this.variable.inputType==="query_model"?this.variable.defaultValue=null:this.variable.defaultValue=e;this.handleChange()},handleOptionSorted(e){this.variable.options=[],this.$nextTick(()=>{this.variable.options=e,this.handleChange()})}}},Lt={class:"opera"};function xt(e,t,l,b,s,i){const u=o("el-input"),d=o("el-form-item"),h=o("InputTypeSelect"),C=o("el-button"),I=o("SortableButton"),f=o("el-table-column"),k=o("el-table"),N=o("OptionSettingWindow"),_=o("VariableInput"),v=o("el-switch"),g=o("CompilerSelect"),S=o("el-form"),q=K("sortable");return c(),V(S,{model:l.variable},{default:n(()=>[a(d,{label:e.$t("service.settings.variable.label"),required:""},{default:n(()=>[a(u,{modelValue:l.variable.label,"onUpdate:modelValue":t[0]||(t[0]=m=>l.variable.label=m),onInput:i.handleChange},null,8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.variable.name"),required:""},{default:n(()=>[a(u,{modelValue:l.variable.name,"onUpdate:modelValue":t[1]||(t[1]=m=>l.variable.name=m),onInput:i.handleChange},null,8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.variable.inputType"),required:""},{default:n(()=>[a(h,{modelValue:l.variable.inputType,"onUpdate:modelValue":t[2]||(t[2]=m=>l.variable.inputType=m),"with-group":i.withGroup,onChange:i.handleInputTypeChange},null,8,["modelValue","with-group","onChange"])]),_:1},8,["label"]),l.variable.inputType==="select"||l.variable.inputType==="checkbox"||l.variable.inputType==="radio"?(c(),V(d,{key:0,label:e.$t("service.settings.variable.options"),class:"item-options",required:""},{label:n(()=>[r("div",null,[r("label",null,p(e.$t("service.settings.variable.options")),1),r("div",Lt,[a(C,{type:"primary",onClick:i.createOption},{default:n(()=>[T(p(e.$t("common.add")),1)]),_:1},8,["onClick"])])])]),default:n(()=>[X((c(),V(k,{data:l.variable.options},{default:n(()=>[a(f,{width:"25px"},{default:n(()=>[a(I)]),_:1}),a(f,{label:"*"+e.$t("service.settings.variable.optionLabel"),"min-width":"200px"},{default:n(({row:m})=>[a(u,{modelValue:m.label,"onUpdate:modelValue":$=>m.label=$,type:"textarea",rows:1,onInput:i.handleChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1},8,["label"]),a(f,{label:"*"+e.$t("service.settings.variable.optionValue"),"min-width":"120px"},{default:n(({row:m})=>[a(u,{modelValue:m.value,"onUpdate:modelValue":$=>m.value=$,onInput:i.handleChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1},8,["label"]),a(f,{label:e.$t("common.remark"),"min-width":"150px"},{default:n(({row:m})=>[a(u,{modelValue:m.remark,"onUpdate:modelValue":$=>m.remark=$,type:"textarea",rows:1,onInput:i.handleChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1},8,["label"]),l.variable.options.length>0?(c(),V(f,{key:0,"min-width":l.variable.inputType==="select"?"120px":"60px",fixed:"right"},{default:n(({row:m,$index:$})=>[l.variable.inputType==="select"?(c(),V(C,{key:0,icon:"Setting",class:"button-icon",onClick:ne=>e.$refs.optionSettingWindow.open(m)},null,8,["onClick"])):w("",!0),a(C,{icon:"Delete",class:"button-icon",onClick:ne=>i.deleteOption($)},null,8,["onClick"])]),_:1},8,["min-width"])):w("",!0)]),_:1},8,["data"])),[[q,{data:l.variable.options,onChange:i.handleOptionSorted},"config"]]),a(N,{ref:"optionSettingWindow",onChange:i.handleChange},null,8,["onChange"])]),_:1},8,["label"])):w("",!0),a(d,{label:e.$t("service.settings.variable.defaultValue")},{default:n(()=>[a(_,{variable:l.variable,"value-key":"defaultValue",onChange:i.handleDefaultValueChange},null,8,["variable","onChange"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.variable.required")},{default:n(()=>[a(v,{modelValue:l.variable.required,"onUpdate:modelValue":t[3]||(t[3]=m=>l.variable.required=m),onChange:i.handleChange},null,8,["modelValue","onChange"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.variable.hidden")},{default:n(()=>[a(v,{modelValue:l.variable.hidden,"onUpdate:modelValue":t[4]||(t[4]=m=>l.variable.hidden=m),onChange:i.handleChange},null,8,["modelValue","onChange"])]),_:1},8,["label"]),l.variable.inputType!=="number_input"&&l.variable.inputType!=="table"&&l.variable.inputType!=="query_model"&&l.variable.inputType!=="datasource"&&l.rootVariable.inputType!=="query_model"&&l.rootVariable.inputType!=="table"?(c(),V(d,{key:1,label:e.$t("service.settings.variable.compiler")},{default:n(()=>[a(g,{modelValue:l.variable.compiler,"onUpdate:modelValue":t[5]||(t[5]=m=>l.variable.compiler=m),onChange:i.handleChange},null,8,["modelValue","onChange"])]),_:1},8,["label"])):w("",!0),a(d,{label:e.$t("common.remark")},{default:n(()=>[a(u,{modelValue:l.variable.remark,"onUpdate:modelValue":t[6]||(t[6]=m=>l.variable.remark=m),type:"textarea",rows:3,onInput:i.handleChange},null,8,["modelValue","onInput"])]),_:1},8,["label"])]),_:1},8,["model"])}const Qt=R(Pt,[["render",xt]]),Wt={name:"VariableGroupSettingForm",components:{VariableInput:Q,CompilerSelect:D,InputTypeSelect:E},props:{variable:{required:!0}},methods:{changeScope(){if(this.variable.type==="group")for(const e of this.variable.children)e.scope=this.variable.scope;this.handleChange()},handleChange(){this.$emit("change")}}};function Gt(e,t,l,b,s,i){const u=o("el-input"),d=o("el-form-item"),h=o("el-form");return c(),V(h,{model:l.variable},{default:n(()=>[a(d,{label:e.$t("service.settings.variable.groupLabel"),required:""},{default:n(()=>[a(u,{modelValue:l.variable.label,"onUpdate:modelValue":t[0]||(t[0]=C=>l.variable.label=C),onInput:i.handleChange},null,8,["modelValue","onInput"])]),_:1},8,["label"]),a(d,{label:e.$t("service.settings.variable.groupName"),required:""},{default:n(()=>[a(u,{modelValue:l.variable.name,"onUpdate:modelValue":t[1]||(t[1]=C=>l.variable.name=C),onInput:i.handleChange},null,8,["modelValue","onInput"])]),_:1},8,["label"])]),_:1},8,["model"])}const Jt=R(Wt,[["render",Gt]]);const Yt={name:"Variables",components:{VariableGroupSettingForm:Jt,VariableSettingForm:Qt,VariableInput:Q,I18nInput:se,InputTypeSelect:E,CompilerSelect:D},props:{space:{required:!0},service:{required:!0},plugin:{required:!1}},data(){return{isWorking:{save:!1},timeout:{save:null},varIndex:1,groupIndex:1,currentVariable:null,currentGroup:null,currentRootVariable:null,variables:[],dragData:{target:null}}},computed:{isPlugin(){return this.plugin!=null},unique(){return this.isPlugin?{space:this.space,service:this.service,plugin:this.plugin}:{space:this.space,service:this.service}},saveVariablesApi(){return this.isPlugin?ce:ue},fetchConfigApi(){return this.isPlugin?O:B}},methods:{selectVariable(e,t){this.currentVariable=null,this.$nextTick(()=>{this.currentVariable=e,this.currentGroup=null,this.currentRootVariable=null,t.level>2?(this.currentRootVariable=t.parent.parent.data,this.currentGroup=t.parent.data):t.level>1?(this.currentRootVariable=t.parent.data,t.parent.data.type==="group"&&(this.currentGroup=t.parent.data)):this.currentRootVariable=t.data})},createChild(e){if(e.type==="group"){this.createVariable(e);return}if(e.inputType==="query_model"){this.createGroup(e,"query_model_field");return}e.inputType==="table"&&this.createGroup(e,"table_field")},createVariable(e){const t=this.__generateVariableName(e==null?this.variables:e.children),l={id:W(),type:"variable",name:t,label:t,inputType:"input",required:!1,hidden:!1,defaultValue:"",compiler:"static",remark:"",options:[]};e!=null?e.children.push(l):this.variables.push(l),this.saveVariables()},createGroup(e){const t=this.__generateGroupName(),l={id:W(),type:"group",name:t,label:t,children:[]};e==null?this.variables.push(l):(e.children==null&&(e.children=[]),e.children.push(l)),this.currentVariable=l,this.saveVariables()},saveVariables(){this.timeout.save!=null&&clearTimeout(this.timeout.save),this.timeout.save=setTimeout(()=>{console.log({...this.unique,variables:this.getVariables()}),this.saveVariablesApi({...this.unique,variables:this.getVariables()}).then(()=>{}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.timeout.save=null})},1e3)},fetchVariables(){this.fetchConfigApi({...this.unique}).then(e=>{this.variables=e.variables.map(t=>this.__getInitVariable(t))}).catch(e=>{this.$tip.apiFailed(e)})},getVariables(){return this.variables.filter(t=>t.name.trim().length>0&&t.label.trim().length>0).map(t=>this.__getSaveVariable(t))},deleteVariable(){const e=this.currentVariable.type==="variable"?"variable":"variable group";this.deleteConfirm(`Do you want to delete the ${e} named 「${this.currentVariable.name}」?`).then(()=>{if(this.currentRootVariable!==this.currentVariable&&(this.currentRootVariable.inputType==="query_model"||this.currentRootVariable.inputType==="table")){const l=this.currentGroup.children.findIndex(b=>b.id===this.currentVariable.id);if(l===-1)return;this.currentGroup.children.splice(l,1);for(const b of this.currentRootVariable.children)for(const s of b.defaultValue)for(const i in s){if(i==="origin")continue;b.children.find(d=>d.name===i)==null&&!s.origin.hasOwnProperty(i)&&delete s[i]}this.currentVariable=null,this.saveVariables();return}if(this.currentGroup!=null){const l=this.currentGroup.children.findIndex(b=>b.id===this.currentVariable.id);if(l===-1)return;this.currentGroup.children.splice(l,1),this.currentVariable=null,this.saveVariables();return}const t=this.variables.findIndex(l=>l.id===this.currentVariable.id);t!==-1&&(this.variables.splice(t,1),this.currentVariable=null,this.saveVariables())}).catch(()=>{})},handleDragStart(e){this.dragData.target=e.data},handleDrop(){this.saveVariables()},allowDrag(){return!0},allowDrop(e,t,l){return e.data.type==="variable"?!(t.data.type==="variable"&&l==="inner"):e.data.type==="group"?t.data.type!=="variable":!1},__getValidOptions(e){return e.filter(t=>t.value.trim().length>0&&t.label.trim().length>0)},__getInitVariable(e){const t=JSON.parse(JSON.stringify(e));return t.type==="group"?(t.children=t.children==null?[]:t.children.map(l=>(l.options=l.options==null?[]:l.options,this.__getInitVariable(l))),t):(t.options=t.options==null?[]:t.options,t.options.forEach(l=>{l.settings=l.settings==null?[]:l.settings}),t.inputType==="select"&&(JSON.stringify(t.defaultValue.settings)==="{}"||t.options.forEach(l=>{l.settings=l.settings.map(b=>({...b,value:t.defaultValue.settings[b.name]}))})),t)},__getSaveVariable(e){const t=JSON.parse(JSON.stringify(e));return t.type==="group"?(t.children=t.children.map(l=>this.__getSaveVariable(l)),t):t.inputType==="number_input"?(t.defaultValue=parseInt(t.defaultValue),t):t.inputType==="query_model"||t.inputType==="table"?(t.children!=null&&t.children.length>0&&(t.children=t.children.map(l=>(l.children=l.children.map(b=>this.__getSaveVariable(b)),l))),delete t.options,t):t.inputType==="select"?(t.options=this.__getValidOptions(t.options),t.options.forEach(l=>{l.settings=l.settings.filter(b=>b.name.trim()!==""&&b.label.trim()!=="")}),t.options.forEach(l=>{l.settings.forEach(b=>{delete b.value})}),t):t.inputType==="radio"||t.inputType==="checkbox"?(t.options=this.__getValidOptions(t.options),t.options.forEach(l=>{delete l.settings}),t):(delete t.options,t)},__generateVariableName(e){let t;for(;;)if(t=`var${this.varIndex}`,this.varIndex++,e.findIndex(l=>l.type==="variable"&&l.name===t)===-1)return t},__generateGroupName(){let e;for(;;)if(e=`group${this.groupIndex}`,this.groupIndex++,this.variables.findIndex(t=>t.type==="group"&&t.name===e)===-1)return e}},created(){this.fetchVariables()}},Ht={class:"tree"},Kt={class:"variables-wrap"},Xt={class:"tools"},Zt={class:"title"},el={key:0,class:"opera"},tl={class:"variable-setting"},ll={class:"title"},al={class:"content-wrap"},nl={key:1,class:"variable-holder"};function il(e,t,l,b,s,i){const u=o("el-button"),d=o("el-tree"),h=o("VariableSettingForm"),C=o("VariableGroupSettingForm");return c(),y("div",Ht,[r("div",Kt,[r("div",Xt,[a(u,{icon:"Plus",type:"primary",onClick:t[0]||(t[0]=I=>i.createVariable())},{default:n(()=>[T(p(e.$t("service.settings.variable.addVariable")),1)]),_:1}),a(u,{icon:"Plus",type:"primary",onClick:t[1]||(t[1]=I=>i.createGroup(null,"service"))},{default:n(()=>[T(p(e.$t("service.settings.variable.addGroup")),1)]),_:1})]),a(d,{ref:"tree",class:"variables","expand-on-click-node":!1,"default-expand-all":!0,"highlight-current":!0,data:s.variables,"node-key":"name",onNodeClick:i.selectVariable,draggable:"","allow-drop":i.allowDrop,"allow-drag":i.allowDrag,"empty-text":e.$t("service.settings.variable.noVariables"),onNodeDragStart:i.handleDragStart,onNodeDrop:i.handleDrop},{default:n(({node:I,data:f})=>[r("div",Zt,[r("span",null,p(f.label),1),f.type==="group"||f.inputType==="query_model"||f.inputType==="table"?(c(),y("div",el,[a(u,{class:"button-icon",icon:"Plus",size:"small",onClick:A(k=>i.createChild(f),["stop"])},null,8,["onClick"])])):w("",!0)])]),_:1},8,["data","onNodeClick","allow-drop","allow-drag","empty-text","onNodeDragStart","onNodeDrop"])]),r("div",tl,[r("div",ll,[r("h4",null,p(e.$t("service.settings.variable.variableSetting")),1),s.currentVariable!=null?(c(),V(u,{key:0,type:"danger",text:"",onClick:i.deleteVariable},{default:n(()=>[T("Delete")]),_:1},8,["onClick"])):w("",!0)]),r("div",al,[s.currentVariable!=null?(c(),y(F,{key:0},[s.currentVariable.type==="variable"?(c(),V(h,{key:0,variable:s.currentVariable,"variable-group":s.currentGroup,"root-variable":s.currentRootVariable,onChange:i.saveVariables},null,8,["variable","variable-group","root-variable","onChange"])):w("",!0),s.currentVariable.type==="group"?(c(),V(C,{key:1,variable:s.currentVariable,onChange:i.saveVariables},null,8,["variable","onChange"])):w("",!0)],64)):(c(),y("div",nl,[r("h5",null,p(e.$t("service.settings.variable.variableHolderTitle")),1),r("p",null,p(e.$t("service.settings.variable.variableHolderTip")),1)]))])])])}const Fl=R(Yt,[["render",il],["__scopeId","data-v-e9496eeb"]]);const sl={name:"SystemVariableTable",data(){return{variableData:{date:[{name:"_yyyy",enRemark:"",zhRemark:"年（固定4位）",demo:"${_yyyy} => 1993"},{name:"_MM",enRemark:"",zhRemark:"月（固定2位）",demo:"${_MM} => 08"},{name:"_dd",enRemark:"",zhRemark:"日前（固定2位）",demo:"${_dd} => 13"},{name:"_hh",enRemark:"",zhRemark:"时（固定2位）",demo:"${_hh} => 00"},{name:"_mm",enRemark:"",zhRemark:"分（固定2位）",demo:"${_mm} => 00"},{name:"_ss",enRemark:"",zhRemark:"秒（固定2位）",demo:"${_ss} => 00"},{name:"_sss",enRemark:"",zhRemark:"毫秒（固定3位）",demo:"${_sss} => 000"}],mysqlTable:[{name:"name",enRemark:"",zhRemark:"原始表名",demo:"${myTable.name} => MY_TABLE"},{name:"camelCaseName",enRemark:"",zhRemark:"表名（驼峰命名法）",demo:"${myTable.camelCaseName} => myTables"},{name:"kebabCaseName",enRemark:"",zhRemark:"表名（中划线命名法）",demo:"${myTable.kebabCaseName} => my-table"},{name:"pascalCaseName",enRemark:"",zhRemark:"表名（帕斯卡命名法）",demo:"${myTable.pascalCaseName} => MyTable"},{name:"underScoreCaseName",enRemark:"",zhRemark:"表名（下划线命名法）",demo:"${myTable.underScoreCaseName} => my_table"},{name:"comment",enRemark:"",zhRemark:"表注释",demo:"${myTable.comment}"},{name:"fields",enRemark:"",zhRemark:"表字段数组",type:"Array",demo:`<#list myTable.fields as field>
\${field.name}
</#list>`},{name:"fields.name",enRemark:"",zhRemark:"字段原始名称",type:"String",demo:`<#list myTable.fields as field>
\${field.name}
</#list>`},{name:"fields.camelCaseName",enRemark:"",zhRemark:"字段名称（驼峰命名法）",type:"String",demo:`<#list myTable.fields as field>
\${field.camelCaseName}
</#list>`},{name:"fields.kebabCaseName",enRemark:"",zhRemark:"字段名称（中划线命名法）",type:"String",demo:`<#list myTable.fields as field>
\${field.kebabCaseName}
</#list>`},{name:"fields.pascalCaseName",enRemark:"",zhRemark:"字段名称（帕斯卡命名法）",type:"String",demo:`<#list myTable.fields as field>
\${field.pascalCaseName}
</#list>`},{name:"fields.underScoreCaseName",enRemark:"",zhRemark:"字段名称（下划线命名法）",type:"String",demo:`<#list myTable.fields as field>
\${field.underScoreCaseName}
</#list>`},{name:"fields.type",enRemark:"",zhRemark:"数据库字段类型",type:"String",demo:`<#list myTable.fields as field>
\${field.type}
</#list>`},{name:"fields.length",enRemark:"",zhRemark:"数据库字段类型长度",type:"Integer",demo:`<#list myTable.fields as field>
\${field.length}
</#list>`},{name:"fields.decimal",enRemark:"",zhRemark:"数据库字段类型精度",type:"Integer",demo:`<#list myTable.fields as field>
\${field.decimal}
</#list>`},{name:"fields.defaultValue",enRemark:"",zhRemark:"字段默认值",type:"Any",demo:`<#list myTable.fields as field>
\${field.defaultValue}
</#list>`},{name:"fields.required",enRemark:"",zhRemark:"是否必填",type:"Boolean",demo:`<#list myTable.fields as field>
\${field.required}
</#list>`},{name:"fields.isPrimaryKey",enRemark:"",zhRemark:"是否为主键",type:"Boolean",demo:`<#list myTable.fields as field>
\${field.isPrimaryKey}
</#list>`},{name:"fields.isAutoIncrement",enRemark:"",zhRemark:"是否为自增长",type:"Boolean",demo:`<#list myTable.fields as field>
\${field.isAutoIncrement}
</#list>`},{name:"fields.comment",enRemark:"",zhRemark:"字段注释",type:"Boolean",demo:`<#list myTable.fields as field>
\${field.comment}
</#list>`}],mysqlQueryModel:[{name:"name",enRemark:"",zhRemark:"模型原始名称",demo:"${myModel.name}"},{name:"camelCaseName",enRemark:"",zhRemark:"模型名称（驼峰命名法）",demo:"${myModel.camelCaseName}"},{name:"kebabCaseName",enRemark:"",zhRemark:"模型名称（中划线命名）",demo:"${myModel.kebabCaseName}"},{name:"pascalCaseName",enRemark:"",zhRemark:"模型名称（帕斯卡命名）",demo:"${myModel.pascalCaseName}"},{name:"underScoreCaseName",enRemark:"",zhRemark:"模型名称（下划线命名）",demo:"${myModel.underScoreCaseName}"},{name:"comment",enRemark:"",zhRemark:"模型注释",demo:"${myModel.comment}"},{name:"mainTable",enRemark:"",zhRemark:"主表，包含了MySQL表的所有信息",demo:"${myModel.mainTable.name} => 主表名称\n${myModel.mainTable.camelCaseName} => 主表名称（驼峰命名法）"},{name:"mainTable.alias",enRemark:"",zhRemark:"主表别名",demo:"${myModel.mainTable.alias}"},{name:"mainTable.fields.aggregate",enRemark:"",zhRemark:"字段聚合信息",demo:""},{name:"mainTable.fields.aggregate.table",enRemark:"",zhRemark:"目标表（聚合的表）",demo:""},{name:"mainTable.fields.aggregate.field",enRemark:"",zhRemark:"目标字段（聚合的字段）",demo:""},{name:"mainTable.fields.aggregate.function",enRemark:"",zhRemark:"使用的聚合函数",demo:"<#list myModel.mainTable.fields as field>\n  <#if field.aggregate??>\n    ${field.aggregate.function}(`${field.aggregate.table.alias}`.`${field.aggregate.field.name}`)\n  </#if>\n</#list>\n => COUNT(`user`.`id`)"},{name:"mainTable.isVirtual",enRemark:"",zhRemark:"是否为虚拟表",demo:"${myModel.mainTable.isVirtual}"},{name:"subTables",enRemark:"",zhRemark:"子表，包含了MySQL表的所有信息",type:"Array",demo:`<#list myModel.subTables as subTable>
\${subTable.name}
</#list>`},{name:"subTables.alias",enRemark:"",zhRemark:"子表别名",type:"Array",demo:`<#list myModel.subTables as subTable>
\${subTable.alias}
</#list>`},{name:"subTables.isVirtual",enRemark:"",zhRemark:"子表是否为虚拟表",type:"Array",demo:`<#list myModel.subTables as subTable>
\${subTable.isVirtual}
</#list>`},{name:"statement",enRemark:"",zhRemark:"各个部分的SQL语句",demo:""},{name:"statement.joins",enRemark:"",zhRemark:"查询模型的join语句",demo:"<#list myModel.statement.joins as joinLine>\n${joinLine}\n</#list>\n => INNER JOIN USER `user` ON `user`.`id` = `test.`field`\nINNER JOIN USER `user` ON `test`.`field` = `test2.`field2`"},{name:"statement.from",enRemark:"",zhRemark:"查询模型的from语句",demo:"${myModel.statement.from}\n => FROM USER `user`"},{name:"joins",enRemark:"",zhRemark:"关联信息",demo:`<#list myModel.joins as join>
\${join.joinType}
</#list>`},{name:"joins.table",enRemark:"",zhRemark:"左表",demo:`<#list myModel.joins as join>
\${join.table.alias}
</#list>`},{name:"joins.targetTable",enRemark:"",zhRemark:"右表",demo:`<#list myModel.joins as join>
\${join.targetTable.alias}
</#list>`},{name:"joins.joinType",enRemark:"",zhRemark:"JOIN类型",demo:`<#list myModel.joins as join>
\${join.joinType}
</#list>`},{name:"joins.ons",enRemark:"",zhRemark:"JOIN ON条件",demo:`<#list myModel.joins as join>
  <#list join.ons as on>
    \${on.field.alias} => 字段别名
  </#list>
</#list>`},{name:"joins.ons.field",enRemark:"",zhRemark:"左侧字段",demo:`<#list myModel.joins as join>
  <#list join.ons as on>
    \${on.field.name}
  </#list>
</#list>`},{name:"joins.ons.targetField",enRemark:"",zhRemark:"右侧字段",demo:`<#list myModel.joins as join>
  <#list join.ons as on>
    \${on.targetField.name}
  </#list>
</#list>`},{name:"joins.ons.relation",enRemark:"",zhRemark:"ON关系，AND或者OR",demo:`<#list myModel.joins as join>
  <#list join.ons as on>
    \${on.relation}
  </#list>
</#list>`}],select:[{name:"mySelect",enRemark:"",zhRemark:"选项值",type:"Any",demo:"${mySelect}"},{name:"mySelectSetting",enRemark:"",zhRemark:"select深度设置内容",type:"Object",demo:"${mySelectSetting.myField}"}]}}}},z=e=>(L("data-v-1c7c574e"),e=e(),x(),e),ol={class:"variable-block"},rl=z(()=>r("h3",null,"日期相关",-1)),ul={class:"variable-block"},dl=z(()=>r("h3",null,"MySQL表相关",-1)),ml=z(()=>r("p",null,"定义变量且输入类型为Table，则可以通过变量名访问以下信息！",-1)),cl={class:"variable-block"},pl=z(()=>r("h3",null,"MySQL查询模型相关",-1)),hl=z(()=>r("p",null,"定义变量且输入类型为Query Model，则可以通过变量名访问以下信息！",-1)),fl={class:"variable-block"},bl=z(()=>r("h3",null,"Select输入类型的深度设置",-1)),_l=z(()=>r("p",null,'定义变量且输入类型为Select，则可以通过变量名添加"Settings"后缀来获取深度设置对象！',-1));function vl(e,t,l,b,s,i){const u=o("el-table-column"),d=o("el-table");return c(),y(F,null,[r("div",ol,[rl,a(d,{data:s.variableData.date},{default:n(()=>[a(u,{label:"变量名",width:"200px",prop:"name"}),a(u,{label:"变量备注",width:"300px",prop:"zhRemark"}),a(u,{label:"示例",prop:"demo"},{default:n(({row:h})=>[r("pre",null,p(h.demo),1)]),_:1})]),_:1},8,["data"])]),r("div",ul,[dl,ml,a(d,{data:s.variableData.mysqlTable},{default:n(()=>[a(u,{label:"变量名",width:"235px",prop:"name"}),a(u,{label:"变量备注",width:"300px",prop:"zhRemark"}),a(u,{label:"示例",prop:"demo"},{default:n(({row:h})=>[r("pre",null,p(h.demo),1)]),_:1})]),_:1},8,["data"])]),r("div",cl,[pl,hl,a(d,{data:s.variableData.mysqlQueryModel},{default:n(()=>[a(u,{label:"变量名",width:"235px",prop:"name"}),a(u,{label:"变量备注",width:"300px",prop:"zhRemark"}),a(u,{label:"示例",prop:"demo"},{default:n(({row:h})=>[r("pre",null,p(h.demo),1)]),_:1})]),_:1},8,["data"])]),r("div",fl,[bl,_l,a(d,{data:s.variableData.select},{default:n(()=>[a(u,{label:"变量名",width:"235px",prop:"name"}),a(u,{label:"变量备注",width:"300px",prop:"zhRemark"}),a(u,{label:"示例",prop:"demo"},{default:n(({row:h})=>[r("pre",null,p(h.demo),1)]),_:1})]),_:1},8,["data"])])],64)}const Al=R(sl,[["render",vl],["__scopeId","data-v-1c7c574e"]]);export{Nl as B,Rl as I,wl as P,Al as S,Fl as V,Il as a};
