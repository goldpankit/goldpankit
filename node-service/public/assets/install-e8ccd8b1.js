import{S as n}from"./ServiceInstaller-7530a113.js";import{a as l}from"./service-ff4ad1ca.js";import{a as p}from"./service.space-3fc278a0.js";import{_ as h,m as u,J as m,r as v,z as d,o as s,c as i,A as _,g as f,j}from"./index-c1ed4b13.js";import"./ServiceCodeErrorWindow-acf9f7a3.js";import"./QueryModelView-e8a421ad.js";import"./InnerRouterViewWindow-390d2a9b.js";import"./form.check-189b470c.js";import"./FormItemTip-b3dd8647.js";const g={components:{ServiceInstaller:n},data(){return{loading:!0,route:{space:null,service:null,majorVersion:null},space:null,service:null,project:null}},computed:{...u(["currentProject"])},methods:{fetchSpace(){p(this.$route.params.spaceName).then(e=>{this.space=e}).catch(e=>{this.$tip.apiFailed(e)})},fetchService(){this.loading=!0,l({space:this.route.space,service:this.route.service,majorVersion:this.route.majorVersion}).then(e=>{this.service=e}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.loading=!1})},handleProjectChange(e){m(e).then(r=>{this.project=r}).catch(r=>{this.$tip.apiFailed(r)})}},created(){this.route.space=this.$route.params.spaceName,this.route.service=this.$route.params.serviceName,this.route.majorVersion=this.$route.query.major,this.fetchSpace(),this.fetchService(),this.currentProject!=null&&this.handleProjectChange(this.currentProject)}},S={class:"page"},P={class:"wrap"};function y(e,r,C,I,t,c){const o=v("ServiceInstaller"),a=d("loading");return s(),i("div",S,[_((s(),i("div",P,[t.space!=null&&t.service!=null?(s(),f(o,{key:0,space:t.space.name,service:t.service.name,"service-price":t.service.price.price,"service-lease":t.service.latestLease,version:t.service.defaultMajorVersion.version,"project-config":t.project,"with-title":!0,"with-install-button":!0,onChangeProject:c.handleProjectChange,onInstalled:r[0]||(r[0]=V=>e.$router.push({name:"Workbench"}))},null,8,["space","service","service-price","service-lease","version","project-config","onChangeProject"])):j("",!0)])),[[a,t.loading]])])}const q=h(g,[["render",y],["__scopeId","data-v-670db548"]]);export{q as default};
