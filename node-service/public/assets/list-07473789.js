import{I as v,a as C}from"./InnerRouterViewWindow-8422e793.js";import{n as k,_ as y,r as d,o as c,g as D,w as t,a as o,b as a,e as n,t as s,B as V,D as E,E as I,c as m,F as B,f as W}from"./index-477bf772.js";import{E as M}from"./Empty-c1e02a8c.js";import{P as N}from"./Pagination-354ecba7.js";const F={name:"DatabaseView",props:{database:{required:!0}},methods:{...k(["setCurrentDatabase"]),gotoQueryModels(){this.setCurrentDatabase(this.database.id),this.$router.push({name:"DatabaseQueryModel"})}}},P={class:"toolbar"};function z(e,l,r,w,p,b){const i=d("el-descriptions-item"),_=d("el-button"),h=d("el-descriptions");return c(),D(h,{title:r.database.name},{extra:t(()=>[o("ul",P,[o("li",null,[a(_,{size:"small",onClick:b.gotoQueryModels},{default:t(()=>[n(s(e.$t("database.queryModels")),1)]),_:1},8,["onClick"])]),o("li",null,[a(_,{size:"small",icon:"Edit",onClick:l[0]||(l[0]=f=>e.$emit("edit"))},{default:t(()=>[n(s(e.$t("common.edit")),1)]),_:1})]),o("li",null,[a(_,{size:"small",type:"danger",text:"",onClick:l[1]||(l[1]=f=>e.$emit("delete"))},{default:t(()=>[n(s(e.$t("common.delete")),1)]),_:1})])])]),default:t(()=>[a(i,{label:e.$t("database.databaseType")},{default:t(()=>[n(s(r.database.type),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.host")},{default:t(()=>[n(s(r.database.host),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.port")},{default:t(()=>[n(s(r.database.port),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.schema")},{default:t(()=>[n(s(r.database.schema),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.username")},{default:t(()=>[n(s(r.database.username),1)]),_:1},8,["label"]),a(i,{label:e.$t("database.password")},{default:t(()=>[n("******")]),_:1},8,["label"])]),_:1},8,["title"])}const Q=y(F,[["render",z],["__scopeId","data-v-e8c5ce5c"]]);const S={components:{CreateDatabaseWindow:V,Pagination:N,Empty:M,DatabaseView:Q,InnerRouterViewWindow:v,InnerRouterView:C},data(){return{databases:[],pagination:{pageIndex:1,capacity:10,total:0}}},methods:{search(){E(this.pagination).then(e=>{this.databases=e.records}).catch(e=>{this.$tip.apiFailed(e)})},edit(e){this.$refs.window.push("operaDatabase")},deleteDatabase(e){this.deleteConfirm("Do you want to delete the database?").then(()=>{I(e).then(()=>{this.search()}).catch(l=>{this.$tip.apiFailed(l)})}).catch(()=>{})}},created(){this.search()}},q={class:"form"},R={class:"wrap"},T={class:"tip"},L={class:"database-list-wrap"},j={class:"toolbar"},A={key:0,class:"database-list"};function G(e,l,r,w,p,b){const i=d("el-button"),_=d("DatabaseView"),h=d("Empty"),f=d("Pagination"),$=d("CreateDatabaseWindow");return c(),m("div",q,[o("div",R,[o("h2",null,s(e.$t("database.databases")),1),o("section",T,s(e.$t("database.tip")),1),o("div",L,[o("ul",j,[o("li",null,[a(i,{type:"primary",onClick:l[0]||(l[0]=u=>e.$refs.operaDatabaseWindow.open())},{default:t(()=>[n(s(e.$t("database.addNewDatabase")),1)]),_:1})])]),p.databases.length>0?(c(),m("ul",A,[(c(!0),m(B,null,W(p.databases,u=>(c(),m("li",{key:u.name},[a(_,{database:u,onEdit:g=>b.edit(u),onDelete:g=>b.deleteDatabase(u.id)},null,8,["database","onEdit","onDelete"])]))),128))])):(c(),D(h,{key:1,description:"No Databases"})),a(f,{pagination:p.pagination},null,8,["pagination"])])]),a($,{ref:"operaDatabaseWindow",onSuccess:b.search},null,8,["onSuccess"])])}const U=y(S,[["render",G],["__scopeId","data-v-f4fab355"]]);export{U as default};
