import{_ as k,O as I,E as w,s as C,d as S,r as c,o as n,c as a,a as t,t as s,b as o,w as r,e as p,F as $,f as U,g as W,m as D,h as E,i as v,j as g}from"./index-4d897c91.js";const N={name:"UserProjects",components:{OperaProjectWindow:I,Empty:w},data(){return{projects:[]}},methods:{search(){C().then(e=>{this.projects=e}).catch(e=>{this.$tip.apiFailed(e)})},editProject(e){this.$refs.operaProjectWindow.open(e)},deleteProject(e){this.deleteConfirm(this.$t("project.deleteTip",{value:`「${e.name}」`})).then(()=>{S(e.id).then(()=>{this.search()}).catch(l=>{this.$tip.apiFailed(l)})}).catch(()=>{})}},created(){this.search()}},F={class:"user-projects"},B={class:"title"},O={key:0},T={class:"avatar"},V={class:"info"},A={class:"opera"};function L(e,l,P,y,_,d){const u=c("Plus"),h=c("el-icon"),m=c("el-button"),f=c("Empty"),b=c("OperaProjectWindow");return n(),a("div",F,[t("div",B,[t("h2",null,s(e.$t("project.myProjects")),1),o(m,{type:"primary",onClick:l[0]||(l[0]=i=>e.$refs.operaProjectWindow.open())},{default:r(()=>[o(h,{size:14,style:{"margin-right":"5px"}},{default:r(()=>[o(u)]),_:1}),p(" "+s(e.$t("project.createProject")),1)]),_:1})]),_.projects.length>0?(n(),a("ul",O,[(n(!0),a($,null,U(_.projects,i=>(n(),a("li",{key:i.id},[t("div",T,s(i.name.substring(0,1)),1),t("div",V,[t("h3",null,s(i.name),1),t("p",null,s(i.codespace),1),t("p",null,s(i.remark),1)]),t("div",A,[o(m,{size:"small",icon:"Edit",onClick:j=>d.editProject(i)},{default:r(()=>[p(s(e.$t("common.edit")),1)]),_:2},1032,["onClick"]),o(m,{type:"danger",text:"",onClick:j=>d.deleteProject(i)},{default:r(()=>[p(s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])])]))),128))])):(n(),W(f,{key:1,description:e.$t("project.noProjects")},null,8,["description"])),o(b,{ref:"operaProjectWindow",onSuccess:d.search},null,8,["onSuccess"])])}const z=k(N,[["render",L],["__scopeId","data-v-72f2fdf9"]]);const R={components:{UserProjects:z},data(){return{logoutData:{isWorking:!1}}},computed:{...D(["userInfo"])},methods:{...E(["logout"]),toUserProfile(){if(this.userInfo==null){this.$router.push({name:"SignIn"});return}},doLogout(){this.logoutData.isWorking||(this.logoutData.isWorking=!0,this.logout().then(()=>{}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.logoutData.isWorking=!1}))}}},M={class:"page"},q={class:"wrap"},G={class:"line"},H={key:0},J={key:0,class:"remaining-tip"},K={key:1,class:"remaining-tip"},Q={key:2},X={class:"line gap-top"},Y={key:0,class:"line gap-top"},Z={class:"project-wrap"};function x(e,l,P,y,_,d){const u=c("router-link"),h=c("el-button"),m=c("UserProjects");return n(),a("div",M,[t("div",q,[t("div",G,[o(u,{to:{name:"PublicServices"},class:"module public-space"},{default:r(()=>[t("h2",null,s(e.$t("service.publicServices")),1),t("p",null,s(e.$t("service.publicServiceIntroduce")),1)]),_:1}),t("a",{onClick:l[1]||(l[1]=(...f)=>d.toUserProfile&&d.toUserProfile(...f)),class:"module profile"},[e.userInfo==null?(n(),a($,{key:0},[e.userInfo==null?(n(),a("h2",H,s(e.$t("user.account")),1)):v("",!0)],64)):(n(),a($,{key:1},[t("h2",null,s(e.getUserDisplayName(e.userInfo)),1),e.getRemainingDay(e.userInfo.vipExpiredTime)===0?(n(),a("p",J," 账号已过期 ")):(n(),a("p",K,[p("账号剩余 "),t("em",null,s(e.getRemainingDay(e.userInfo.vipExpiredTime)),1),p(" 天")])),e.userInfo!=null?(n(),a("ul",Q,[t("li",null,[o(h,{onClick:l[0]||(l[0]=g(f=>e.$router.push({name:"UserProfile"}),["stop"])),icon:"UserFilled"},{default:r(()=>[p(s(e.$t("user.profile")),1)]),_:1})]),t("li",null,[o(h,{onClick:g(d.doLogout,["stop"]),disabled:_.logoutData.isWorking},{default:r(()=>[p(s(e.$t("user.logout")),1)]),_:1},8,["onClick","disabled"])])])):v("",!0)],64))])]),t("div",X,[o(u,{class:"module workbench",to:{name:"Workbench"}},{default:r(()=>[t("h2",null,s(e.$t("space.workbench")),1),t("p",null,s(e.$t("space.workbenchIntroduce")),1)]),_:1}),o(u,{to:{name:"Databases"},class:"module database"},{default:r(()=>[t("h2",null,s(e.$t("database.databases")),1),t("p",null,s(e.$t("database.databaseIntroduce")),1)]),_:1})]),e.userInfo!=null&&e.userInfo.isDeveloper?(n(),a("div",Y,[o(u,{to:{name:"CreateSpace"},class:"module new-space"},{default:r(()=>[t("h2",null,s(e.$t("space.createNewSpace")),1),t("p",null,s(e.$t("space.createNewSpaceIntroduce")),1)]),_:1}),o(u,{class:"module private-services",to:{name:"UserServices"}},{default:r(()=>[t("h2",null,s(e.$t("user.leasedAndPrivateServices")),1),t("p",null,s(e.$t("user.leasedAndPrivateServiceIntroduce")),1)]),_:1})])):v("",!0),t("div",Z,[o(m)])])])}const te=k(R,[["render",x],["__scopeId","data-v-22b79f33"]]);export{te as default};
