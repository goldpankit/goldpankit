import{_ as d,r as s,o as l,g as _,w as r,b as o,e as m,c as h,f as g,F as x,x as I,T as N,S as C,a as S,t as M,k as y,p as k,h as T}from"./index-8997febf.js";import{C as q}from"./CompilerSelect-d29fcf29.js";import{s as B}from"./service-099db8a1.js";const w={name:"SpaceSelect"};function A(t,n,v,f,e,i){const c=s("el-option"),a=s("el-select");return l(),_(a,{class:"factory-select"},{default:r(()=>[o(c,{value:"1",label:"Eva-SpringBoot"}),o(c,{value:"2",label:"Eva-SpringCloud"})]),_:1})}const F=d(w,[["render",A],["__scopeId","data-v-dd51cda2"]]);const U={name:"ServiceTypeSelect"};function E(t,n,v,f,e,i){const c=s("el-radio"),a=s("el-radio-group");return l(),_(a,null,{default:r(()=>[o(c,{label:"MAIN"},{default:r(()=>[m("Main Service")]),_:1}),o(c,{label:"COMMON"},{default:r(()=>[m("Common Service")]),_:1})]),_:1})}const D=d(U,[["render",E],["__scopeId","data-v-c44d5132"]]);const L={name:"VersionSelect"};function O(t,n,v,f,e,i){const c=s("el-option"),a=s("el-select");return l(),_(a,{class:"version-select"},{default:r(()=>[o(c,{label:"V1",value:"v1"}),o(c,{label:"V2",value:"v2"}),o(c,{label:"V3",value:"v3"}),o(c,{label:"V4",value:"v4"}),o(c,{label:"V5",value:"v5"})]),_:1})}const P=d(L,[["render",O],["__scopeId","data-v-ba99869f"]]);const z={name:"MainServiceSelect",props:{space:{required:!0}},data(){return{services:[]}},methods:{fetchServices(){B({space:this.space,serviceType:"MAIN"}).then(t=>{this.services=t}).catch(t=>{this.$tip.apiFailed(t)})}},created(){this.fetchServices()}};function R(t,n,v,f,e,i){const c=s("el-option"),a=s("el-select");return l(),_(a,{class:"main-service-select"},{default:r(()=>[(l(!0),h(x,null,g(e.services,p=>(l(),_(c,{key:p.name,value:p.name,label:p.name},null,8,["value","label"]))),128))]),_:1})}const j=d(z,[["render",R],["__scopeId","data-v-05bd52ee"]]);function G(t){return I.post("/usr/service/create",t,{baseURL:"/remote-api"})}const H={components:{MainServiceSelect:j,VersionSelect:P,DatabaseSelect:N,ServiceTypeSelect:D,CompilerSelect:q,SpaceSelect:F,I18nInput:C},data(){return{space:null,form:{name:"",type:"MAIN",mainServiceName:null,repository:"",introduce:""},rules:{name:[{required:!0,message:"Please input service name"}],mainServiceName:[{required:!0,message:"Please select main service"}]}}},methods:{create(){this.$refs.form.validate(t=>{t&&G({space:this.space,...this.form}).then(()=>{this.$router.push({name:"ServiceSettings",query:{space:this.space,service:this.form.name}})}).catch(n=>{this.$tip.apiFailed(n)})})}},created(){this.space=this.$route.query.space}},J=t=>(k("data-v-11317779"),t=t(),T(),t),K={class:"form"},Q={class:"wrap"},W=J(()=>S("h2",null,"Create Service",-1)),X={key:0,class:"tip"},Y={class:"opera"};function Z(t,n,v,f,e,i){const c=s("el-input"),a=s("el-form-item"),p=s("ServiceTypeSelect"),b=s("MainServiceSelect"),V=s("el-form"),$=s("el-button");return l(),h("div",K,[S("div",Q,[W,e.space!=null?(l(),h("section",X,[m(" Create Service for "),S("em",null,M(e.space),1),m(". ")])):y("",!0),o(V,{ref:"form",model:e.form,rules:e.rules},{default:r(()=>[o(a,{label:"Service Name",prop:"name",required:""},{default:r(()=>[o(c,{modelValue:e.form.name,"onUpdate:modelValue":n[0]||(n[0]=u=>e.form.name=u)},null,8,["modelValue"])]),_:1}),o(a,{label:"Service Type",prop:"type",required:""},{default:r(()=>[o(p,{modelValue:e.form.type,"onUpdate:modelValue":n[1]||(n[1]=u=>e.form.type=u)},null,8,["modelValue"])]),_:1}),e.form.type!=="MAIN"?(l(),_(a,{key:0,label:"Main Service",prop:"mainServiceName",required:""},{default:r(()=>[o(b,{modelValue:e.form.mainServiceName,"onUpdate:modelValue":n[2]||(n[2]=u=>e.form.mainServiceName=u),space:e.space},null,8,["modelValue","space"])]),_:1})):y("",!0)]),_:1},8,["model","rules"]),S("div",Y,[o($,{type:"primary",size:"large",onClick:i.create},{default:r(()=>[m("Create Service")]),_:1},8,["onClick"])])])])}const ce=d(H,[["render",Z],["__scopeId","data-v-11317779"]]);export{ce as default};
