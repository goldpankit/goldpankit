import{I as S,a as V}from"./InnerRouterViewWindow-76cb5791.js";import{q as I,_ as D,r,o as i,g as $,w as s,a as n,b as t,e as m,t as d,c,F as b,p as E,k as F,C as W,D as B,E as M,G as N,H as T,f as P}from"./index-10e8cffd.js";import{P as q}from"./Pagination-8282e6ee.js";const z={name:"DatabaseView",props:{database:{required:!0}},data(){return{hidden:{host:!0,username:!0,password:!0}}},methods:{...I(["setCurrentDatabase"]),gotoQueryModels(){this.setCurrentDatabase(this.database.id),this.$router.push({name:"DatabaseQueryModel"})}}},k=e=>(E("data-v-92c315f8"),e=e(),F(),e),H={class:"content-wrap"},O=k(()=>n("span",{class:"content-holder"},"******",-1)),Q={class:"content-wrap"},R=k(()=>n("span",{class:"content-holder"},"******",-1)),G={class:"content-wrap"},L=k(()=>n("span",{class:"content-holder"},"******",-1)),j={class:"toolbar"};function A(e,a,u,g,o,h){const p=r("el-descriptions-item"),f=r("View"),_=r("el-icon"),w=r("Hide"),y=r("el-button"),v=r("el-descriptions");return i(),$(v,{title:u.database.name},{extra:s(()=>[n("ul",j,[n("li",null,[t(y,{size:"small",onClick:h.gotoQueryModels},{default:s(()=>[m(d(e.$t("database.queryModels")),1)]),_:1},8,["onClick"])]),n("li",null,[t(y,{size:"small",icon:"Edit",onClick:a[6]||(a[6]=l=>e.$emit("edit"))},{default:s(()=>[m(d(e.$t("common.edit")),1)]),_:1})]),n("li",null,[t(y,{size:"small",type:"danger",text:"",onClick:a[7]||(a[7]=l=>e.$emit("delete"))},{default:s(()=>[m(d(e.$t("common.delete")),1)]),_:1})])])]),default:s(()=>[t(p,{label:e.$t("database.databaseType")},{default:s(()=>[m(d(u.database.type),1)]),_:1},8,["label"]),t(p,{label:e.$t("database.host")},{default:s(()=>[n("div",H,[o.hidden.host?(i(),c(b,{key:0},[O,t(_,{onClick:a[0]||(a[0]=l=>o.hidden.host=!1)},{default:s(()=>[t(f)]),_:1})],64)):(i(),c(b,{key:1},[n("span",null,d(u.database.host),1),t(_,{onClick:a[1]||(a[1]=l=>o.hidden.host=!0)},{default:s(()=>[t(w)]),_:1})],64))])]),_:1},8,["label"]),t(p,{label:e.$t("database.port")},{default:s(()=>[m(d(u.database.port),1)]),_:1},8,["label"]),t(p,{label:e.$t("database.schema")},{default:s(()=>[m(d(u.database.schema),1)]),_:1},8,["label"]),t(p,{label:e.$t("database.username")},{default:s(()=>[n("div",Q,[o.hidden.username?(i(),c(b,{key:0},[R,t(_,{onClick:a[2]||(a[2]=l=>o.hidden.username=!1)},{default:s(()=>[t(f)]),_:1})],64)):(i(),c(b,{key:1},[n("span",null,d(u.database.username),1),t(_,{onClick:a[3]||(a[3]=l=>o.hidden.username=!0)},{default:s(()=>[t(w)]),_:1})],64))])]),_:1},8,["label"]),t(p,{label:e.$t("database.password")},{default:s(()=>[n("div",G,[o.hidden.password?(i(),c(b,{key:0},[L,t(_,{onClick:a[4]||(a[4]=l=>o.hidden.password=!1)},{default:s(()=>[t(f)]),_:1})],64)):(i(),c(b,{key:1},[n("span",null,d(u.database.password),1),t(_,{onClick:a[5]||(a[5]=l=>o.hidden.password=!0)},{default:s(()=>[t(w)]),_:1})],64))])]),_:1},8,["label"])]),_:1},8,["title"])}const J=D(z,[["render",A],["__scopeId","data-v-92c315f8"]]);const K={components:{FormTip:W,OperaDataSourceWindow:B,Pagination:q,Empty:M,DatabaseView:J,InnerRouterViewWindow:S,InnerRouterView:V},data(){return{databases:[],pagination:{pageIndex:1,capacity:10,total:0}}},methods:{search(){N(this.pagination).then(e=>{this.databases=e.records}).catch(e=>{this.$tip.apiFailed(e)})},edit(e){this.$refs.operaDataSourceWindow.open(e)},deleteDatabase(e){this.deleteConfirm("Do you want to delete the database?").then(()=>{T(e).then(()=>{this.search()}).catch(a=>{this.$tip.apiFailed(a)})}).catch(()=>{})}},created(){this.search()}},U={class:"form"},X={class:"wrap"},Y={class:"database-list-wrap"},Z={class:"toolbar"},x={key:0,class:"database-list"};function ee(e,a,u,g,o,h){const p=r("FormTip"),f=r("el-button"),_=r("DatabaseView"),w=r("Empty"),y=r("Pagination"),v=r("OperaDataSourceWindow");return i(),c("div",U,[n("div",X,[n("h2",null,d(e.$t("database.databases")),1),t(p,null,{default:s(()=>[m(d(e.$t("database.tip")),1)]),_:1}),n("div",Y,[n("ul",Z,[n("li",null,[t(f,{type:"primary",onClick:a[0]||(a[0]=l=>e.$refs.operaDataSourceWindow.open())},{default:s(()=>[m(d(e.$t("database.addNewDatabase")),1)]),_:1})])]),o.databases.length>0?(i(),c("ul",x,[(i(!0),c(b,null,P(o.databases,l=>(i(),c("li",{key:l.name},[t(_,{database:l,onEdit:C=>h.edit(l),onDelete:C=>h.deleteDatabase(l.id)},null,8,["database","onEdit","onDelete"])]))),128))])):(i(),$(w,{key:1,description:"No Databases"})),t(y,{pagination:o.pagination},null,8,["pagination"])])]),t(v,{ref:"operaDataSourceWindow",onSuccess:h.search},null,8,["onSuccess"])])}const ne=D(K,[["render",ee],["__scopeId","data-v-20885975"]]);export{ne as default};
