import{_ as P,O as I,E as w,s as S,d as C,r as c,o as a,c as i,a as t,t as s,b as o,w as n,e as d,F as $,f as U,g as W,m as D,h as E,i as v,j as k,p as N,k as F}from"./index-7c4f5eaa.js";const B={name:"UserProjects",components:{OperaProjectWindow:I,Empty:w},data(){return{projects:[]}},methods:{search(){S().then(e=>{this.projects=e}).catch(e=>{this.$tip.apiFailed(e)})},editProject(e){this.$refs.operaProjectWindow.open(e)},deleteProject(e){this.deleteConfirm(this.$t("project.deleteTip",{value:`「${e.name}」`})).then(()=>{C(e.id).then(()=>{this.search()}).catch(r=>{this.$tip.apiFailed(r)})}).catch(()=>{})}},created(){this.search()}},O={class:"user-projects"},R={class:"title"},T={key:0},V={class:"avatar"},A={class:"info"},L={class:"opera"};function z(e,r,y,b,_,u){const p=c("Plus"),m=c("el-icon"),h=c("el-button"),f=c("Empty"),g=c("OperaProjectWindow");return a(),i("div",O,[t("div",R,[t("h2",null,s(e.$t("project.myProjects")),1),o(h,{type:"primary",onClick:r[0]||(r[0]=l=>e.$refs.operaProjectWindow.open())},{default:n(()=>[o(m,{size:14,style:{"margin-right":"5px"}},{default:n(()=>[o(p)]),_:1}),d(" "+s(e.$t("project.createProject")),1)]),_:1})]),_.projects.length>0?(a(),i("ul",T,[(a(!0),i($,null,U(_.projects,l=>(a(),i("li",{key:l.id},[t("div",V,s(l.name.substring(0,1)),1),t("div",A,[t("h3",null,s(l.name),1),t("p",null,s(l.codespace),1),t("p",null,s(l.remark),1)]),t("div",L,[o(h,{size:"small",icon:"Edit",onClick:j=>u.editProject(l)},{default:n(()=>[d(s(e.$t("common.edit")),1)]),_:2},1032,["onClick"]),o(h,{type:"danger",text:"",onClick:j=>u.deleteProject(l)},{default:n(()=>[d(s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])])]))),128))])):(a(),W(f,{key:1,description:e.$t("project.noProjects")},null,8,["description"])),o(g,{ref:"operaProjectWindow",onSuccess:u.search},null,8,["onSuccess"])])}const M=P(B,[["render",z],["__scopeId","data-v-72f2fdf9"]]);const q={components:{UserProjects:M},data(){return{logoutData:{isWorking:!1}}},computed:{...D(["userInfo"])},methods:{...E(["logout"]),toUserProfile(){if(this.userInfo==null){this.$router.push({name:"SignIn"});return}},doLogout(){this.logoutData.isWorking||(this.logoutData.isWorking=!0,this.logout().then(()=>{}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.logoutData.isWorking=!1}))}}},G=e=>(N("data-v-94303936"),e=e(),F(),e),H={class:"page"},J={class:"wrap"},K={class:"line"},Q={key:0},X=G(()=>t("p",{class:"login-tip-wrap"},[d(" 当前未登录，"),t("em",null,"去登录！")],-1)),Y={key:0,class:"remaining-tip"},Z={key:1,class:"remaining-tip"},x={key:2},ee={class:"line gap-top"},te={key:0,class:"line gap-top"},se={class:"project-wrap"};function oe(e,r,y,b,_,u){const p=c("router-link"),m=c("el-button"),h=c("Right"),f=c("el-icon"),g=c("UserProjects");return a(),i("div",H,[t("div",J,[t("div",K,[o(p,{to:{name:"PublicServices"},class:"module public-space"},{default:n(()=>[t("h2",null,s(e.$t("service.publicServices")),1),t("p",null,s(e.$t("service.publicServiceIntroduce")),1)]),_:1}),t("a",{onClick:r[2]||(r[2]=(...l)=>u.toUserProfile&&u.toUserProfile(...l)),class:"module profile"},[e.userInfo==null?(a(),i($,{key:0},[e.userInfo==null?(a(),i("h2",Q,s(e.$t("user.account")),1)):v("",!0),X],64)):(a(),i($,{key:1},[t("h2",null,s(e.getUserDisplayName(e.userInfo)),1),e.getRemainingDay(e.userInfo.vipExpiredTime)===0?(a(),i("p",Y," 账号已过期 ")):(a(),i("p",Z,[d("账号剩余 "),t("em",null,s(e.getRemainingDay(e.userInfo.vipExpiredTime)),1),d(" 天")])),e.userInfo!=null?(a(),i("ul",x,[t("li",null,[o(m,{icon:"UserFilled",onClick:r[0]||(r[0]=k(l=>e.$router.push({name:"UserProfile"}),["stop"]))},{default:n(()=>[d(s(e.$t("user.profile")),1)]),_:1})]),t("li",null,[o(m,{disabled:_.logoutData.isWorking,onClick:r[1]||(r[1]=k(l=>e.$router.push({name:"UpdatePwd"}),["stop"]))},{default:n(()=>[d("修改密码")]),_:1},8,["disabled"])])])):v("",!0),o(m,{class:"button-logout",disabled:_.logoutData.isWorking,link:"",onClick:k(u.doLogout,["stop"])},{default:n(()=>[d(s(e.$t("user.logout")),1),o(f,null,{default:n(()=>[o(h)]),_:1})]),_:1},8,["disabled","onClick"])],64))])]),t("div",ee,[o(p,{class:"module workbench",to:{name:"Workbench"}},{default:n(()=>[t("h2",null,s(e.$t("space.workbench")),1),t("p",null,s(e.$t("space.workbenchIntroduce")),1)]),_:1}),o(p,{to:{name:"Databases"},class:"module database"},{default:n(()=>[t("h2",null,s(e.$t("database.databases")),1),t("p",null,s(e.$t("database.databaseIntroduce")),1)]),_:1})]),e.userInfo!=null&&e.userInfo.isDeveloper?(a(),i("div",te,[o(p,{to:{name:"CreateSpace"},class:"module new-space"},{default:n(()=>[t("h2",null,s(e.$t("space.createNewSpace")),1),t("p",null,s(e.$t("space.createNewSpaceIntroduce")),1)]),_:1}),o(p,{class:"module private-services",to:{name:"UserServices"}},{default:n(()=>[t("h2",null,s(e.$t("user.leasedAndPrivateServices")),1),t("p",null,s(e.$t("user.leasedAndPrivateServiceIntroduce")),1)]),_:1})])):v("",!0),t("div",se,[o(g)])])])}const ae=P(q,[["render",oe],["__scopeId","data-v-94303936"]]);export{ae as default};
