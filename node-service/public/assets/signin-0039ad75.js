import{_ as g,n as h,q as w,u as b,v,r as a,o as k,c as y,a as r,t as i,b as s,w as n,i as V,x as $,e as p}from"./index-57c80a9e.js";const q={data(){return{form:{username:"",password:""},loginData:{isWorking:!1}}},methods:{...h(["setUserInfo"]),getRules(){return{username:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("user.username")})}],password:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("user.password")})}]}},login(){this.$refs.form.validate().then(()=>{this.loginData.isWorking||(this.loginData.isWorking=!0,w({...this.form,username:this.form.username.trim()}).then(e=>e).then(e=>{document.cookie=`x-kit-token=${e};`,b(e)}).then(()=>{v().then(e=>{this.setUserInfo(e),this.$router.push({name:"Desktop"})})}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.loginData.isWorking=!1}))}).catch(()=>{})}}},D={class:"signup"},I={class:"wrap"},U={class:"login-box"},W={class:"create-account"};function x(e,o,B,C,t,l){const m=a("el-input"),d=a("el-form-item"),f=a("el-form"),_=a("el-button"),c=a("router-link");return k(),y("div",D,[r("div",I,[r("h2",null,i(e.$t("common.signIn")),1),s(f,{ref:"form",model:t.form,rules:l.getRules(),onSubmit:o[2]||(o[2]=V(()=>{},["stop"]))},{default:n(()=>[s(d,{label:e.$t("user.username"),prop:"username",required:""},{default:n(()=>[s(m,{modelValue:t.form.username,"onUpdate:modelValue":o[0]||(o[0]=u=>t.form.username=u),type:"text",size:"large"},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{class:"password-item",label:e.$t("user.password"),prop:"password",required:""},{label:n(()=>[r("label",null,i(e.$t("user.password")),1)]),default:n(()=>[s(m,{modelValue:t.form.password,"onUpdate:modelValue":o[1]||(o[1]=u=>t.form.password=u),"show-password":"",type:"password",size:"large",onKeypress:$(l.login,["enter","native"])},null,8,["modelValue","onKeypress"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),r("div",U,[r("div",null,[s(_,{type:"important",disabled:t.loginData.isWorking,onClick:l.login},{default:n(()=>[p(i(e.$t("common.signIn")),1)]),_:1},8,["disabled","onClick"])])])]),r("div",W,[s(c,{to:{name:"SignUp"}},{default:n(()=>[p(i(e.$t("user.createAccount")),1)]),_:1})])])}const K=g(q,[["render",x],["__scopeId","data-v-4bb1226d"]]);export{K as default};
