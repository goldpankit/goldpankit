import{_ as b,C as y,Q as S,$ as I,r as s,o as _,c as V,a as l,t as d,h as T,w as a,j as g,b as t,e as m}from"./index-3e8fc5cf.js";import{M as q,V as C,S as k,a as F,p as $}from"./index-f17cf471.js";import{C as x}from"./CompilerSelect-1ffaffb2.js";import{c as w}from"./user.service-579cc5ae.js";import"./service-13e64073.js";const B={components:{FormTip:y,FormItemTip:S,MainServiceSelect:q,VersionSelect:C,ServiceTypeSelect:k,CompilerSelect:x,SpaceSelect:F,I18nInput:I},data(){return{space:null,form:{name:"",label:""}}},methods:{handleLabelInput(r){this.form.name=$(r,{toneType:"none",type:"array"}).map(e=>e.substr(0,1)).join("")},getRules(){return{name:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("service.settings.name")})}],label:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("service.settings.label")})}]}},create(){this.$refs.form.validate(r=>{r&&w({space:this.space,...this.form}).then(()=>{this.$router.push({name:"ServiceSettings",query:{space:this.space,service:this.form.name}})}).catch(e=>{this.$tip.apiFailed(e)})})}},created(){this.space=this.$route.query.space,this.$nextTick(()=>{setTimeout(()=>{this.$refs.labelInput.focus()},100)})}},N={class:"form"},R={class:"wrap"},j={class:"opera"};function L(r,e,M,U,o,n){const f=s("FormTip"),c=s("el-input"),p=s("FormItemTip"),u=s("el-form-item"),h=s("el-form"),v=s("el-button");return _(),V("div",N,[l("div",R,[l("h2",null,d(r.$t("service.createService")),1),o.space!=null?(_(),T(f,{key:0},{default:a(()=>[m(" 为空间"),l("em",null,d(o.space),1),m("创建服务。 ")]),_:1})):g("",!0),t(h,{ref:"form",model:o.form,rules:n.getRules()},{default:a(()=>[t(u,{label:"服务名称",prop:"label",required:""},{default:a(()=>[t(c,{ref:"labelInput",modelValue:o.form.label,"onUpdate:modelValue":e[0]||(e[0]=i=>o.form.label=i),onInput:n.handleLabelInput},null,8,["modelValue","onInput"]),t(p,{content:"服务名称将展示给使用者，方便使用者更好的理解您的用意。"})]),_:1}),t(u,{label:"服务标识符",prop:"name",required:""},{default:a(()=>[t(c,{class:"follow-input",modelValue:o.form.name,"onUpdate:modelValue":e[1]||(e[1]=i=>o.form.name=i)},null,8,["modelValue"]),t(p,{content:"服务标识符会在使用者安装您的服务后记录在项目配置文件中，且标识符在同一个服务空间中是唯一的，一旦确认将不可修改。"})]),_:1})]),_:1},8,["model","rules"]),l("div",j,[t(v,{type:"primary",onClick:n.create},{default:a(()=>[m("创建服务")]),_:1},8,["onClick"])])])])}const G=b(B,[["render",L],["__scopeId","data-v-655e6e16"]]);export{G as default};
