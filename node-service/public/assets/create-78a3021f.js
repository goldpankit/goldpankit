import{M as b,V as y,S as $,a as I,p as V}from"./index-24c105e4.js";import{y as S,_ as F,V as T,r as s,o as i,c as u,a as o,t as r,F as h,e as a,j as q,b as n,w as p}from"./index-1bde5b44.js";import{C as k}from"./CompilerSelect-780ea313.js";import{F as C}from"./FormItemTip-20d06b90.js";import"./service-7dc00799.js";function R(e){return S.post("/usr/plugin/create",e,{baseURL:"/remote-api"})}const w={components:{FormItemTip:C,MainServiceSelect:b,VersionSelect:y,ServiceTypeSelect:$,CompilerSelect:k,SpaceSelect:I,I18nInput:T},data(){return{space:null,service:null,form:{name:"",label:""}}},methods:{getRules(){return{name:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("plugin.name")})}],label:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("plugin.label")})}]}},handleLabelInput(e){this.form.name=V(e,{toneType:"none",type:"array"}).map(t=>t.substr(0,1)).join("")},create(){this.$refs.form.validate(e=>{e&&R({space:this.space,service:this.service,...this.form}).then(()=>{this.$router.push({name:"PluginSettings",query:{space:this.space,service:this.service,plugin:this.form.name}})}).catch(t=>{this.$tip.apiFailed(t)})})}},created(){this.space=this.$route.query.space,this.service=this.$route.query.service,this.$nextTick(()=>{setTimeout(()=>{this.$refs.labelInput.focus()},100)})}},N={class:"form"},B={class:"wrap"},L={key:0,class:"tip"},U={class:"opera"};function j(e,t,M,z,l,m){const f=s("el-input"),d=s("FormItemTip"),_=s("el-form-item"),g=s("el-form"),v=s("el-button");return i(),u("div",N,[o("div",B,[o("h2",null,r(e.$t("plugin.create")),1),l.service!=null?(i(),u("section",L,[e.$i18n.locale==="en"?(i(),u(h,{key:0},[a(r(e.$t("plugin.createFor")),1),o("em",null,r(l.service),1),a(". ")],64)):(i(),u(h,{key:1},[a(r(e.$t("plugin.createFor1")),1),o("em",null,r(l.service),1),a(r(e.$t("plugin.createFor2"))+"ã€‚ ",1)],64))])):q("",!0),n(g,{ref:"form",model:l.form,rules:m.getRules()},{default:p(()=>[n(_,{label:e.$t("plugin.label"),prop:"label",required:""},{default:p(()=>[n(f,{ref:"labelInput",modelValue:l.form.label,"onUpdate:modelValue":t[0]||(t[0]=c=>l.form.label=c),onInput:m.handleLabelInput},null,8,["modelValue","onInput"]),n(d,{content:e.$t("plugin.labelTip")},null,8,["content"])]),_:1},8,["label"]),n(_,{label:e.$t("plugin.name"),prop:"name",required:""},{default:p(()=>[n(f,{class:"follow-input",modelValue:l.form.name,"onUpdate:modelValue":t[1]||(t[1]=c=>l.form.name=c)},null,8,["modelValue"]),n(d,{content:e.$t("plugin.nameTip")},null,8,["content"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),o("div",U,[n(v,{type:"primary",size:"large",onClick:m.create},{default:p(()=>[a(r(e.$t("plugin.create")),1)]),_:1},8,["onClick"])])])])}const H=F(w,[["render",j],["__scopeId","data-v-f564d469"]]);export{H as default};
