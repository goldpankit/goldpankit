import{m as b,_ as I,r,o as a,c as n,a as o,b as i,t as c,g as _,w as u,F as V,f as S,j as k,e as j,p as w,d as g}from"./index-2937f55a.js";import{V as y,I as B,a as C,b as N,i as P}from"./VariableInput-95b4e3fe.js";const x={name:"ServiceInstaller",components:{VariableInput:y,InstallRadio:B,InstallInput:C,InstallCheckbox:N},props:{space:{required:!0},service:{required:!0},projectService:{},serviceVersion:{required:!1},withBreadcrumbs:{default:!1},withInstallButton:{default:!1}},data(){return{variables:[]}},computed:{...b(["currentProject"])},methods:{install(){P({space:this.space,service:this.service,projectId:this.currentProject.id,variables:this.variables}).then(()=>{this.$emit("success")}).catch(e=>{this.$emit("error",e)})},__getVariableValue(e){let t=null;return this.projectService!=null&&(t=this.projectService.variables[e.name]),t==null&&(t=e.inputType==="checkbox"?[]:""),t}},created(){this.variables=JSON.parse(this.service.variables).map(e=>({...e,value:this.__getVariableValue(e)}))}},L=e=>(w("data-v-2f27fdfb"),e=e(),g(),e),q={class:"service-installer"},T={key:0,class:"nav"},A={class:"title"},F={class:"content-wrap"},D=L(()=>o("p",{class:"install-tip"}," tips: Install the service by filling out the form below and clicking the Install button at the bottom. ",-1)),E={key:0,class:"install"};function J(e,t,s,O,p,m){const d=r("el-button"),v=r("VariableInput"),f=r("el-form-item"),h=r("el-form");return a(),n("div",q,[s.withBreadcrumbs?(a(),n("div",T,[o("div",A,[i(d,{class:"button-icon",icon:"ArrowLeftBold",onClick:t[0]||(t[0]=l=>e.$emit("back"))}),o("h4",null,c(s.service.name)+c(s.serviceVersion==null?"":" · "+s.serviceVersion.toUpperCase())+" · Install",1)])])):_("",!0),o("div",F,[D,i(h,null,{default:u(()=>[(a(!0),n(V,null,S(p.variables,l=>(a(),k(f,{key:l.name,label:l.message},{default:u(()=>[i(v,{variable:l},null,8,["variable"])]),_:2},1032,["label"]))),128))]),_:1}),s.withInstallButton?(a(),n("div",E,[i(d,{type:"important",disabled:e.currentProject==null,onClick:m.install},{default:u(()=>[j(" INSTALL"+c(e.currentProject==null?"":" to project "+e.currentProject.name),1)]),_:1},8,["disabled","onClick"])])):_("",!0)])])}const $=I(x,[["render",J],["__scopeId","data-v-2f27fdfb"]]);export{$ as S};
