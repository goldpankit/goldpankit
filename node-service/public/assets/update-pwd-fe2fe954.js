import{u as w}from"./user.password-a1cc5c05.js";import{_,r as a,o as c,c as h,a as l,b as o,w as d,k as P,e as g,p as V,l as v}from"./index-98da7881.js";const k={data(){return{isWorking:{update:!1},form:{password:"",newPassword:"",confirmNewPassword:""},rules:{password:[{required:!0,message:"请输入原始密码"}],newPassword:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度不能小于6位"}],confirmNewPassword:[{required:!0,message:"请再次输入新密码"},{validator:(r,e,n)=>{e!==this.form.newPassword?n(new Error("两次输入密码不一致")):n()}}]}}},methods:{updatePwd(){this.isWorking.update||this.$refs.form.validate(r=>{r&&(this.isWorking.update=!0,w(this.form).then(()=>{this.success("密码修改成功，请妥善保存新密码！","修改成功").then(()=>{this.$router.push({name:"Desktop"})}).catch(()=>{})}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.isWorking.update=!1}))})}}},b=r=>(V("data-v-c58f1fd2"),r=r(),v(),r),N={class:"signup"},x={class:"wrap"},y=b(()=>l("h2",null,"修改密码",-1)),q={class:"login-box"};function W(r,e,n,C,s,u){const i=a("el-input"),p=a("el-form-item"),m=a("el-form"),f=a("el-button");return c(),h("div",N,[l("div",x,[y,o(m,{ref:"form",model:s.form,rules:s.rules,onSubmit:e[3]||(e[3]=P(()=>{},["stop"]))},{default:d(()=>[o(p,{label:"原始密码",prop:"password",required:""},{default:d(()=>[o(i,{modelValue:s.form.password,"onUpdate:modelValue":e[0]||(e[0]=t=>s.form.password=t),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1}),o(p,{label:"新密码",prop:"newPassword",required:""},{default:d(()=>[o(i,{modelValue:s.form.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>s.form.newPassword=t),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1}),o(p,{label:"确认新密码",prop:"confirmNewPassword",required:""},{default:d(()=>[o(i,{modelValue:s.form.confirmNewPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>s.form.confirmNewPassword=t),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l("div",q,[l("div",null,[o(f,{type:"important",disabled:s.isWorking.update,onClick:u.updatePwd},{default:d(()=>[g("确认修改")]),_:1},8,["disabled","onClick"])])])])])}const B=_(k,[["render",W],["__scopeId","data-v-c58f1fd2"]]);export{B as default};
