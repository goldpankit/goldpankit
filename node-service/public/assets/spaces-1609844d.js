import{s as w}from"./service.space-96995e9f.js";import{P as z}from"./Pagination-ed9a0c44.js";import{E as V}from"./Empty-89b3c193.js";import{S as x}from"./ServiceList-7d9f8021.js";import{_ as D,r as s,y as E,o as a,c as i,a as o,b as c,w as d,v as N,g as p,k as l,z as B,F,f as L,e as P,t as h,A as b}from"./index-8997febf.js";import"./BeanAmount-278922ff.js";const I={components:{ServiceList:x,Empty:V,Pagination:z},data(){return{loading:!1,keyword:"",pagination:{pageIndex:1,pageCount:0,capacity:15,total:0},spaces:[]}},methods:{search(){this.loading||(this.loading=!0,w({...this.pagination,model:{keyword:this.keyword}}).then(e=>{this.pagination.total=e.total,this.pagination.pageCount=e.pageCount,this.spaces=e.records}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.loading=!1}))},handleSizeChange(e){this.pagination.capacity=e,this.search()},handleCurrentChange(e){this.pagination.pageIndex=e,this.search()}},created(){this.search()}},K={class:"page"},j={class:"warp"},q={class:"search-wrap"},A={class:"input-wrap"},T={key:1,class:"space-list"},U=["onClick"],G={key:0,class:"user-profile"},H={key:0,src:b},J=["src"];function M(e,u,O,Q,n,r){const m=s("Search"),C=s("el-icon"),y=s("el-input"),v=s("el-button"),g=s("Pagination"),k=s("ServiceList"),S=s("Empty"),f=E("loading");return a(),i("div",K,[o("div",j,[o("div",q,[o("div",A,[c(C,{size:"20"},{default:d(()=>[c(m)]),_:1}),c(y,{modelValue:n.keyword,"onUpdate:modelValue":u[0]||(u[0]=t=>n.keyword=t),size:"large",placeholder:"Search spaces & services",onKeypress:N(r.search,["enter","native"])},null,8,["modelValue","onKeypress"])]),c(v,{size:"large",type:"primary",onClick:r.search},{default:d(()=>[P("Search")]),_:1},8,["onClick"])]),n.pagination.pageCount>1?(a(),p(g,{key:0,pagination:n.pagination,position:"top",onCurrentChange:r.handleCurrentChange,onSizeChange:r.handleSizeChange},null,8,["pagination","onCurrentChange","onSizeChange"])):l("",!0),n.loading||n.spaces.length>0?B((a(),i("ul",T,[(a(!0),i(F,null,L(n.spaces,t=>(a(),i("li",{key:t.id},[o("a",{href:"javascript:;",onClick:_=>e.$router.push({name:"SpaceDetail",params:{name:t.name}})},[o("h3",null,h(t.name),1),o("p",null,h(t.introduce),1),c(k,{services:t.mainServices,onClick:_=>e.$router.push({name:"SpaceDetail",params:{name:t.name},query:{service:_.name}})},null,8,["services","onClick"]),t.user!=null?(a(),i("div",G,[t.user.avatar==null?(a(),i("img",H)):(a(),i("img",{key:1,src:t.user.avatar},null,8,J)),o("span",null,h(t.user.nickname),1)])):l("",!0)],8,U)]))),128))])),[[f,n.loading]]):l("",!0),n.keyword.trim()!==""&&n.spaces.length===0?(a(),p(S,{key:2,description:"Not Found Spaces"})):l("",!0),n.pagination.pageCount>1?(a(),p(g,{key:3,pagination:n.pagination,onCurrentChange:r.handleCurrentChange,onSizeChange:r.handleSizeChange},null,8,["pagination","onCurrentChange","onSizeChange"])):l("",!0)])])}const ee=D(I,[["render",M],["__scopeId","data-v-c373e72c"]]);export{ee as default};
