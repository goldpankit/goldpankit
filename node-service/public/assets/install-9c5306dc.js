import{S as n}from"./ServiceInstaller-a936e24b.js";import{a as l}from"./service-0b725c87.js";import{a as p}from"./service.space-d158013e.js";import{_ as h,m as u,J as v,r as m,z as f,o as s,c as i,A as _,g as d,j}from"./index-ec3906ec.js";import"./ServiceCodeErrorWindow-357c2f19.js";import"./QueryModelView-c7da41fd.js";import"./InnerRouterViewWindow-454d79b1.js";import"./form.check-189b470c.js";import"./service.version-4f471c7a.js";import"./FormItemTip-48c78754.js";const g={components:{ServiceInstaller:n},data(){return{loading:!0,route:{space:null,service:null,majorVersion:null},space:null,service:null,project:null}},computed:{...u(["currentProject"])},methods:{fetchSpace(){p(this.$route.params.spaceName).then(e=>{this.space=e}).catch(e=>{this.$tip.apiFailed(e)})},fetchService(){this.loading=!0,l({space:this.route.space,service:this.route.service,majorVersion:this.route.majorVersion}).then(e=>{this.service=e}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.loading=!1})},handleProjectChange(e){e==null||e===""||v(e).then(t=>{this.project=t}).catch(t=>{this.$tip.apiFailed(t)})}},created(){this.route.space=this.$route.params.spaceName,this.route.service=this.$route.params.serviceName,this.route.majorVersion=this.$route.query.major,this.fetchSpace(),this.fetchService(),this.currentProject!=null&&this.handleProjectChange(this.currentProject)}},S={class:"page"},P={class:"wrap"};function y(e,t,C,V,r,o){const c=m("ServiceInstaller"),a=f("loading");return s(),i("div",S,[_((s(),i("div",P,[r.space!=null&&r.service!=null?(s(),d(c,{key:0,space:r.space.name,service:r.service.name,"service-price":r.service.price.price,"service-lease":r.service.latestLease,version:r.service.defaultMajorVersion.version,versions:r.service.defaultMajorVersion.versions,"project-config":r.project,"with-title":!0,"with-install-button":!0,onChangeProject:o.handleProjectChange,onInstalled:t[0]||(t[0]=k=>e.$router.push({name:"Workbench"}))},null,8,["space","service","service-price","service-lease","version","versions","project-config","onChangeProject"])):j("",!0)])),[[a,r.loading]])])}const q=h(g,[["render",y],["__scopeId","data-v-a5df2622"]]);export{q as default};
