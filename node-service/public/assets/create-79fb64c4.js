import{_ as d,r as s,o as l,g as _,w as r,b as t,e as m,c as y,f as g,F as N,S as x,a as S,t as I,j as h,p as C,l as M}from"./index-8f640eca.js";import{C as k}from"./CompilerSelect-16972578.js";import{s as q}from"./service-12779033.js";import{c as T}from"./user.service-4da1fea2.js";const B={name:"SpaceSelect"};function w(o,n,v,f,e,i){const c=s("el-option"),a=s("el-select");return l(),_(a,{class:"factory-select"},{default:r(()=>[t(c,{value:"1",label:"Eva-SpringBoot"}),t(c,{value:"2",label:"Eva-SpringCloud"})]),_:1})}const A=d(B,[["render",w],["__scopeId","data-v-dd51cda2"]]);const F={name:"ServiceTypeSelect"};function E(o,n,v,f,e,i){const c=s("el-radio"),a=s("el-radio-group");return l(),_(a,null,{default:r(()=>[t(c,{label:"MAIN"},{default:r(()=>[m("Main Service")]),_:1}),t(c,{label:"COMMON"},{default:r(()=>[m("Common Service")]),_:1})]),_:1})}const U=d(F,[["render",E],["__scopeId","data-v-c44d5132"]]);const O={name:"VersionSelect"};function P(o,n,v,f,e,i){const c=s("el-option"),a=s("el-select");return l(),_(a,{class:"version-select"},{default:r(()=>[t(c,{label:"V1",value:"v1"}),t(c,{label:"V2",value:"v2"}),t(c,{label:"V3",value:"v3"}),t(c,{label:"V4",value:"v4"}),t(c,{label:"V5",value:"v5"})]),_:1})}const j=d(O,[["render",P],["__scopeId","data-v-ba99869f"]]);const z={name:"MainServiceSelect",props:{space:{required:!0}},data(){return{services:[]}},methods:{fetchServices(){q({space:this.space,serviceType:"MAIN"}).then(o=>{this.services=o}).catch(o=>{this.$tip.apiFailed(o)})}},created(){this.fetchServices()}};function D(o,n,v,f,e,i){const c=s("el-option"),a=s("el-select");return l(),_(a,{class:"main-service-select"},{default:r(()=>[(l(!0),y(N,null,g(e.services,p=>(l(),_(c,{key:p.name,value:p.name,label:p.name},null,8,["value","label"]))),128))]),_:1})}const L=d(z,[["render",D],["__scopeId","data-v-05bd52ee"]]);const G={components:{MainServiceSelect:L,VersionSelect:j,ServiceTypeSelect:U,CompilerSelect:k,SpaceSelect:A,I18nInput:x},data(){return{space:null,form:{name:"",type:"MAIN",mainServiceName:null,repository:"",introduce:""},rules:{name:[{required:!0,message:"Please input service name"}],mainServiceName:[{required:!0,message:"Please select main service"}]}}},methods:{create(){this.$refs.form.validate(o=>{o&&T({space:this.space,...this.form}).then(()=>{this.$router.push({name:"ServiceSettings",query:{space:this.space,service:this.form.name}})}).catch(n=>{this.$tip.apiFailed(n)})})}},created(){this.space=this.$route.query.space}},H=o=>(C("data-v-9c331c55"),o=o(),M(),o),J={class:"form"},K={class:"wrap"},Q=H(()=>S("h2",null,"Create Service",-1)),R={key:0,class:"tip"},W={class:"opera"};function X(o,n,v,f,e,i){const c=s("el-input"),a=s("el-form-item"),p=s("ServiceTypeSelect"),b=s("MainServiceSelect"),V=s("el-form"),$=s("el-button");return l(),y("div",J,[S("div",K,[Q,e.space!=null?(l(),y("section",R,[m(" Create Service for "),S("em",null,I(e.space),1),m(". ")])):h("",!0),t(V,{ref:"form",model:e.form,rules:e.rules},{default:r(()=>[t(a,{label:"Service Name",prop:"name",required:""},{default:r(()=>[t(c,{modelValue:e.form.name,"onUpdate:modelValue":n[0]||(n[0]=u=>e.form.name=u)},null,8,["modelValue"])]),_:1}),t(a,{label:"Service Type",prop:"type",required:""},{default:r(()=>[t(p,{modelValue:e.form.type,"onUpdate:modelValue":n[1]||(n[1]=u=>e.form.type=u)},null,8,["modelValue"])]),_:1}),e.form.type!=="MAIN"?(l(),_(a,{key:0,label:"Main Service",prop:"mainServiceName",required:""},{default:r(()=>[t(b,{modelValue:e.form.mainServiceName,"onUpdate:modelValue":n[2]||(n[2]=u=>e.form.mainServiceName=u),space:e.space},null,8,["modelValue","space"])]),_:1})):h("",!0)]),_:1},8,["model","rules"]),S("div",W,[t($,{type:"primary",size:"large",onClick:i.create},{default:r(()=>[m("Create Service")]),_:1},8,["onClick"])])])])}const ce=d(G,[["render",X],["__scopeId","data-v-9c331c55"]]);export{ce as default};
