import{P as v}from"./Pagination-f09bf09f.js";import{f as S}from"./user.service-d8133bd3.js";import{b as P}from"./service-21be9986.js";import{E as k}from"./Empty-5b594ef0.js";import{_ as x,r as l,o as n,c as r,a as t,b as p,F as C,f as E,g as b,t as a,w as h,e as u,p as w,l as L}from"./index-6afa8d1b.js";const B={components:{Empty:k,Pagination:v},data(){return{loading:!1,pagination:{page:1,capacity:10,total:100},services:[]}},methods:{editCode(e){this.$router.push({name:"ServiceSettings",query:{space:e.space.name,service:e.name}})},fetchPage(){this.loading||(this.loading=!0,S({...this.pagination,model:{}}).then(e=>{this.services=e.records,this.pagination.total=e.total,this.fetchLocalServices()}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.loading=!1}))},fetchLocalServices(){P().then(e=>{this.services.forEach(o=>{o.codespace=null;const i=e.find(d=>d.space===o.space.name&&d.name===o.name);i!=null&&(o.repository=i.repository,o.codespace=i.codespace)})}).catch(e=>{this.$tip.apiFailed(e)})}},created(){this.fetchPage()}},F=e=>(w("data-v-3e042089"),e=e(),L(),e),I={class:"page"},N={class:"wrap"},$=F(()=>t("div",{class:"header"},[t("h2",null,"Leased and private services")],-1)),D={class:"search-wrap"},V={key:0,class:"service-list"},T={class:"introduce"},q={class:"footer-info"},z={class:"user-profile"},A=["src"],O={class:"text-info-1 text-mini"},U={class:"opera"};function j(e,o,i,d,c,m){const f=l("el-input"),_=l("el-button"),g=l("Empty"),y=l("Pagination");return n(),r("div",I,[t("div",N,[$,t("div",D,[p(f,{size:"large",placeholder:"type here and press enter."})]),!c.loading&&c.services.length>0?(n(),r("ul",V,[(n(!0),r(C,null,E(c.services,s=>(n(),r("li",{key:s.id},[t("h3",null,"@"+a(s.space.name)+"/"+a(s.name),1),t("p",T,a(s.introduce),1),t("p",null,"代码空间: "+a(s.codespace),1),t("p",null,"代码仓库: "+a(s.repository),1),t("div",q,[t("div",z,[t("img",{src:e.getAccessUri(s.user.avatar,"/images/avatar/default.png")},null,8,A),t("span",null,a(s.user.username),1)]),t("p",O,"最后发布于: "+a(s.lastPublish==null?"未发布":e.getDateOffsetText(s.lastPublish,e.$t)),1)]),t("ul",U,[t("li",null,[p(_,{text:"",onClick:G=>m.editCode(s)},{default:h(()=>[u("Edit Code")]),_:2},1032,["onClick"])]),t("li",null,[p(_,{text:"",type:"danger"},{default:h(()=>[u("Delete")]),_:1})])])]))),128))])):(n(),b(g,{key:1,description:"No Services"})),p(y,{pagination:c.pagination},null,8,["pagination"])])])}const R=x(B,[["render",j],["__scopeId","data-v-3e042089"]]);export{R as default};
