import{_ as S,V as g,r as l,o as i,c,a as n,t as o,F as v,e as a,j as y,b as r,w as m}from"./index-1bde5b44.js";import{M as $,V,S as I,a as F,p as T}from"./index-24c105e4.js";import{C as k}from"./CompilerSelect-780ea313.js";import{F as q}from"./FormItemTip-20d06b90.js";import{c as C}from"./user.service-e1eaf53b.js";import"./service-7dc00799.js";const w={components:{FormItemTip:q,MainServiceSelect:$,VersionSelect:V,ServiceTypeSelect:I,CompilerSelect:k,SpaceSelect:F,I18nInput:g},data(){return{space:null,form:{name:"",label:""}}},methods:{handleLabelInput(e){this.form.name=T(e,{toneType:"none",type:"array"}).map(t=>t.substr(0,1)).join("")},getRules(){return{name:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("service.settings.name")})}],label:[{required:!0,message:this.$t("form.isRequired",{value:this.$t("service.settings.label")})}]}},create(){this.$refs.form.validate(e=>{e&&C({space:this.space,...this.form}).then(()=>{this.$router.push({name:"ServiceSettings",query:{space:this.space,service:this.form.name}})}).catch(t=>{this.$tip.apiFailed(t)})})}},created(){this.space=this.$route.query.space,this.$nextTick(()=>{setTimeout(()=>{this.$refs.labelInput.focus()},100)})}},N={class:"form"},R={class:"wrap"},B={key:0,class:"tip"},j={class:"opera"};function L(e,t,M,U,s,p){const d=l("el-input"),f=l("FormItemTip"),_=l("el-form-item"),h=l("el-form"),b=l("el-button");return i(),c("div",N,[n("div",R,[n("h2",null,o(e.$t("service.createService")),1),s.space!=null?(i(),c("section",B,[e.$i18n.locale==="en"?(i(),c(v,{key:0},[a(o(e.$t("service.createServiceFor")),1),n("em",null,o(s.space),1),a(". ")],64)):(i(),c(v,{key:1},[a(o(e.$t("service.createServiceFor1")),1),n("em",null,o(s.space),1),a(o(e.$t("service.createServiceFor2"))+"ã€‚ ",1)],64))])):y("",!0),r(h,{ref:"form",model:s.form,rules:p.getRules()},{default:m(()=>[r(_,{label:e.$t("service.settings.label"),prop:"label",required:""},{default:m(()=>[r(d,{ref:"labelInput",modelValue:s.form.label,"onUpdate:modelValue":t[0]||(t[0]=u=>s.form.label=u),onInput:p.handleLabelInput},null,8,["modelValue","onInput"]),r(f,{content:e.$t("service.settings.labelTip")},null,8,["content"])]),_:1},8,["label"]),r(_,{label:e.$t("service.settings.name"),prop:"name",required:""},{default:m(()=>[r(d,{class:"follow-input",modelValue:s.form.name,"onUpdate:modelValue":t[1]||(t[1]=u=>s.form.name=u)},null,8,["modelValue"]),r(f,{content:e.$t("service.settings.nameTip")},null,8,["content"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),n("div",j,[r(b,{type:"primary",size:"large",onClick:p.create},{default:m(()=>[a(o(e.$t("service.createService")),1)]),_:1},8,["onClick"])])])])}const J=S(w,[["render",L],["__scopeId","data-v-111bdedd"]]);export{J as default};
