import{_ as S,r as s,o as l,g as p,w as a,b as c,e as _,t as i,c as f,f as I,F as h,U as M,a as v,j as b}from"./index-1c43f46f.js";import{C as k}from"./CompilerSelect-319207b2.js";import{s as C}from"./service-439d7d20.js";import{c as q}from"./user.service-6f1e9797.js";const T={name:"SpaceSelect"};function F(e,r,y,$,t,m){const o=s("el-option"),n=s("el-select");return l(),p(n,{class:"factory-select"},{default:a(()=>[c(o,{value:"1",label:"Eva-SpringBoot"}),c(o,{value:"2",label:"Eva-SpringCloud"})]),_:1})}const B=S(T,[["render",F],["__scopeId","data-v-dd51cda2"]]);const A={name:"ServiceTypeSelect"};function U(e,r,y,$,t,m){const o=s("el-radio"),n=s("el-radio-group");return l(),p(n,null,{default:a(()=>[c(o,{label:"MAIN"},{default:a(()=>[_(i(e.$t("service.mainService")),1)]),_:1}),c(o,{label:"COMMON"},{default:a(()=>[_(i(e.$t("service.commonService")),1)]),_:1})]),_:1})}const w=S(A,[["render",U],["__scopeId","data-v-86336d19"]]);const x={name:"VersionSelect"};function E(e,r,y,$,t,m){const o=s("el-option"),n=s("el-select");return l(),p(n,{class:"version-select"},{default:a(()=>[c(o,{label:"V1",value:"v1"}),c(o,{label:"V2",value:"v2"}),c(o,{label:"V3",value:"v3"}),c(o,{label:"V4",value:"v4"}),c(o,{label:"V5",value:"v5"})]),_:1})}const O=S(x,[["render",E],["__scopeId","data-v-ba99869f"]]);const P={name:"MainServiceSelect",props:{space:{required:!0}},data(){return{services:[]}},methods:{fetchServices(){C({space:this.space,serviceType:"MAIN"}).then(e=>{this.services=e}).catch(e=>{this.$tip.apiFailed(e)})}},created(){this.fetchServices()}};function j(e,r,y,$,t,m){const o=s("el-option"),n=s("el-select");return l(),p(n,{class:"main-service-select"},{default:a(()=>[(l(!0),f(h,null,I(t.services,u=>(l(),p(o,{key:u.name,value:u.name,label:u.name},null,8,["value","label"]))),128))]),_:1})}const z=S(P,[["render",j],["__scopeId","data-v-05bd52ee"]]);const D={components:{MainServiceSelect:z,VersionSelect:O,ServiceTypeSelect:w,CompilerSelect:k,SpaceSelect:B,I18nInput:M},data(){return{space:null,form:{name:"",type:"MAIN",mainServiceName:null,repository:"",introduce:""},rules:{name:[{required:!0,message:"Please input service name"}],mainServiceName:[{required:!0,message:"Please select main service"}]}}},methods:{create(){this.$refs.form.validate(e=>{e&&q({space:this.space,...this.form}).then(()=>{this.$router.push({name:"ServiceSettings",query:{space:this.space,service:this.form.name}})}).catch(r=>{this.$tip.apiFailed(r)})})}},created(){this.space=this.$route.query.space}},L={class:"form"},G={class:"wrap"},H={key:0,class:"tip"},J={class:"opera"};function K(e,r,y,$,t,m){const o=s("el-input"),n=s("el-form-item"),u=s("ServiceTypeSelect"),V=s("MainServiceSelect"),g=s("el-form"),N=s("el-button");return l(),f("div",L,[v("div",G,[v("h2",null,i(e.$t("service.createService")),1),t.space!=null?(l(),f("section",H,[e.$i18n.locale==="en"?(l(),f(h,{key:0},[_(i(e.$t("service.createServiceFor")),1),v("em",null,i(t.space),1),_(". ")],64)):(l(),f(h,{key:1},[_(i(e.$t("service.createServiceFor1")),1),v("em",null,i(t.space),1),_(i(e.$t("service.createServiceFor2"))+"ã€‚ ",1)],64))])):b("",!0),c(g,{ref:"form",model:t.form,rules:t.rules},{default:a(()=>[c(n,{label:e.$t("service.serviceName"),prop:"name",required:""},{default:a(()=>[c(o,{modelValue:t.form.name,"onUpdate:modelValue":r[0]||(r[0]=d=>t.form.name=d)},null,8,["modelValue"])]),_:1},8,["label"]),c(n,{label:e.$t("service.serviceType"),prop:"type",required:""},{default:a(()=>[c(u,{modelValue:t.form.type,"onUpdate:modelValue":r[1]||(r[1]=d=>t.form.type=d)},null,8,["modelValue"])]),_:1},8,["label"]),t.form.type!=="MAIN"?(l(),p(n,{key:0,label:e.$t("service.mainService"),prop:"mainServiceName",required:""},{default:a(()=>[c(V,{modelValue:t.form.mainServiceName,"onUpdate:modelValue":r[2]||(r[2]=d=>t.form.mainServiceName=d),space:t.space},null,8,["modelValue","space"])]),_:1},8,["label"])):b("",!0)]),_:1},8,["model","rules"]),v("div",J,[c(N,{type:"primary",size:"large",onClick:m.create},{default:a(()=>[_(i(e.$t("service.createService")),1)]),_:1},8,["onClick"])])])])}const Y=S(D,[["render",K],["__scopeId","data-v-792bad9f"]]);export{Y as default};
