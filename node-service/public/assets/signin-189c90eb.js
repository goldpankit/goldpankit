import{_ as g,n as h,q as w,u as k,v as b,r as a,o as v,c as y,a as r,t as l,b as o,w as s,i as V,e as d,x as D}from"./index-39109f26.js";const $={data(){return{form:{username:"",password:""},loginData:{isWorking:!1}}},methods:{...h(["setUserInfo"]),login(){this.$refs.form.validate().then(()=>{this.loginData.isWorking||(this.loginData.isWorking=!0,w(this.form).then(e=>e).then(e=>{document.cookie=`x-kit-token=${e};`,k(e)}).then(()=>{b().then(e=>{this.setUserInfo(e),this.$router.push({name:"Desktop"})})}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.loginData.isWorking=!1}))}).catch(()=>{})}}},I={class:"signup"},U={class:"wrap"},W={class:"login-box"},B={class:"create-account"};function C(e,t,q,x,n,u){const m=a("el-input"),p=a("el-form-item"),c=a("router-link"),_=a("el-form"),f=a("el-button");return v(),y("div",I,[r("div",U,[r("h2",null,l(e.$t("common.signIn")),1),o(_,{ref:"form",model:n.form,onSubmit:t[2]||(t[2]=V(()=>{},["stop"]))},{default:s(()=>[o(p,{label:e.$t("user.username"),prop:"username",required:""},{default:s(()=>[o(m,{modelValue:n.form.username,"onUpdate:modelValue":t[0]||(t[0]=i=>n.form.username=i),type:"text",size:"large"},null,8,["modelValue"])]),_:1},8,["label"]),o(p,{class:"password-item",label:e.$t("user.password"),prop:"password",required:""},{label:s(()=>[r("label",null,l(e.$t("user.password")),1),o(c,{to:"#"},{default:s(()=>[d(l(e.$t("user.forgotPassword")),1)]),_:1})]),default:s(()=>[o(m,{modelValue:n.form.password,"onUpdate:modelValue":t[1]||(t[1]=i=>n.form.password=i),"show-password":"",type:"password",size:"large",onKeypress:D(u.login,["enter","native"])},null,8,["modelValue","onKeypress"])]),_:1},8,["label"])]),_:1},8,["model"]),r("div",W,[r("div",null,[o(f,{type:"important",disabled:n.loginData.isWorking,onClick:u.login},{default:s(()=>[d(l(e.$t("common.signIn")),1)]),_:1},8,["disabled","onClick"])])])]),r("div",B,[o(c,{to:{name:"SignUp"}},{default:s(()=>[d(l(e.$t("user.createAccount")),1)]),_:1})])])}const N=g($,[["render",C],["__scopeId","data-v-c17cd763"]]);export{N as default};
