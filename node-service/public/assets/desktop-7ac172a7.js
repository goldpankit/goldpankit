import{_ as g,C as P,s as y,d as b,r as c,o as l,c as r,a as t,t as o,b as s,w as a,e as h,F as C,f as w,g as S,m as I,h as W,i as $,j as U}from"./index-39109f26.js";import{E as D}from"./Empty-863b76aa.js";const N={name:"UserProjects",components:{CreateProjectWindow:P,Empty:D},data(){return{projects:[]}},methods:{search(){y().then(e=>{this.projects=e}).catch(e=>{console.log("e")})},deleteProject(e){this.$model.deleteConfirm(`Do you want to delete the project named 「${e.name}」 ?`).then(()=>{b(e.id).then(()=>{console.log("删除成功"),this.search()}).catch(n=>{console.log("删除失败",n)})}).catch(()=>{})}},created(){this.search()}},E={class:"user-projects"},B={class:"title"},F={key:0},V={class:"avatar"},L={class:"info"},z={class:"opera"};function A(e,n,v,k,u,p){const i=c("Plus"),_=c("el-icon"),m=c("el-button"),f=c("Empty"),j=c("CreateProjectWindow");return l(),r("div",E,[t("div",B,[t("h2",null,o(e.$t("project.myProjects")),1),s(m,{type:"primary",onClick:n[0]||(n[0]=d=>e.$refs.createProjectWindow.open())},{default:a(()=>[s(_,{size:14,style:{"margin-right":"5px"}},{default:a(()=>[s(i)]),_:1}),h(" "+o(e.$t("project.createProject")),1)]),_:1})]),u.projects.length>0?(l(),r("ul",F,[(l(!0),r(C,null,w(u.projects,d=>(l(),r("li",null,[t("div",V,o(d.name.substring(0,1)),1),t("div",L,[t("h3",null,o(d.name),1),t("p",null,o(d.codespace),1)]),t("div",z,[s(m,{type:"danger",text:"",onClick:Y=>p.deleteProject(d)},{default:a(()=>[h(o(e.$t("common.delete")),1)]),_:2},1032,["onClick"])])]))),256))])):(l(),S(f,{key:1,description:e.$t("project.noProjects")},null,8,["description"])),s(j,{ref:"createProjectWindow",onSuccess:p.search},null,8,["onSuccess"])])}const M=g(N,[["render",A],["__scopeId","data-v-47893d62"]]);const T={components:{UserProjects:M},data(){return{logoutData:{isWorking:!1}}},computed:{...I(["userInfo"])},methods:{...W(["logout"]),doLogout(){this.logoutData.isWorking||(this.logoutData.isWorking=!0,this.logout().then(()=>{console.log("退出成功")}).catch(e=>{this.$tip.apiFailed(e)}).finally(()=>{this.logoutData.isWorking=!1}))}}},q={class:"page"},G={class:"wrap"},H={class:"line gap-bottom"},J={key:0},K={key:1},O={key:2},Q={class:"line gap-top"},R={class:"project-wrap"};function X(e,n,v,k,u,p){const i=c("router-link"),_=c("el-button"),m=c("UserProjects");return l(),r("div",q,[t("div",G,[t("div",H,[s(i,{to:{name:"PublicSpaces"},class:"module public-space"},{default:a(()=>[t("h2",null,o(e.$t("space.publicSpaces")),1),t("p",null,o(e.$t("space.publicSpaceIntroduce")),1)]),_:1}),t("a",{onClick:n[1]||(n[1]=f=>e.$router.push({name:"UserProfile"})),class:"module profile"},[e.userInfo==null?(l(),r("h2",J,o(e.$t("user.account")),1)):(l(),r("h2",K,o(e.userInfo.username),1)),e.userInfo!=null?(l(),r("ul",O,[t("li",null,[s(_,{onClick:n[0]||(n[0]=$(f=>e.$router.push({name:"UserProfile"}),["stop"])),icon:"UserFilled"},{default:a(()=>[h(o(e.$t("user.profile")),1)]),_:1})]),t("li",null,[s(_,{onClick:$(p.doLogout,["stop"]),disabled:u.logoutData.isWorking},{default:a(()=>[h(o(e.$t("user.logout")),1)]),_:1},8,["onClick","disabled"])])])):U("",!0)])]),s(i,{class:"module private-space",to:{name:"UserSpaces"}},{default:a(()=>[t("h2",null,o(e.$t("space.privateSpaces")),1),t("p",null,o(e.$t("space.privateSpaceIntroduce")),1)]),_:1}),t("div",Q,[s(i,{to:{name:"CreateSpace"},class:"module new-space"},{default:a(()=>[t("h2",null,o(e.$t("space.createNewSpace")),1),t("p",null,o(e.$t("space.createNewSpaceIntroduce")),1)]),_:1}),s(i,{to:{name:"Databases"},class:"module database"},{default:a(()=>[t("h2",null,o(e.$t("database.databases")),1),t("p",null,o(e.$t("database.databaseIntroduce")),1)]),_:1})]),t("div",R,[s(m)])])])}const ee=g(T,[["render",X],["__scopeId","data-v-5e798128"]]);export{ee as default};
