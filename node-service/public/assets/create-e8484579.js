import{_ as m,r as a,o as _,j as p,w as r,b as e,c as v,f as C,F as b,I as N,a as S,e as V,t as $,g as F,p as q,d as D}from"./index-2937f55a.js";import{C as U}from"./CompilerSelect-4ac34fba.js";import{f as T}from"./service.space-8d252d88.js";import{s as B,c as E}from"./service-022673d3.js";const L={name:"SpaceSelect"};function j(s,l,u,d,o,i){const t=a("el-option"),n=a("el-select");return _(),p(n,{class:"factory-select"},{default:r(()=>[e(t,{value:"1",label:"Eva-SpringBoot"}),e(t,{value:"2",label:"Eva-SpringCloud"})]),_:1})}const z=m(L,[["render",j],["__scopeId","data-v-dd51cda2"]]);const M={name:"ServiceTypeSelect"};function O(s,l,u,d,o,i){const t=a("el-option"),n=a("el-select");return _(),p(n,{class:"service-type-select"},{default:r(()=>[e(t,{value:"framework",label:"Framework Service"}),e(t,{value:"common",label:"Common Service"}),e(t,{value:"logic",label:"Logic Service"}),e(t,{value:"page",label:"Page Service"}),e(t,{value:"issue",label:"Issue Service"})]),_:1})}const P=m(M,[["render",O],["__scopeId","data-v-405fef91"]]);const Q={name:"DatabaseSelect"};function R(s,l,u,d,o,i){const t=a("el-option"),n=a("el-select");return _(),p(n,{class:"database-select"},{default:r(()=>[e(t,{value:"mysql",label:"MySQL"}),e(t,{value:"oracle",label:"Oracle"})]),_:1})}const A=m(Q,[["render",R],["__scopeId","data-v-f74ef198"]]);const G={name:"VersionSelect"};function H(s,l,u,d,o,i){const t=a("el-option"),n=a("el-select");return _(),p(n,{class:"version-select"},{default:r(()=>[e(t,{label:"V1",value:"v1"}),e(t,{label:"V2",value:"v2"}),e(t,{label:"V3",value:"v3"}),e(t,{label:"V4",value:"v4"}),e(t,{label:"V5",value:"v5"})]),_:1})}const J=m(G,[["render",H],["__scopeId","data-v-ba99869f"]]);const K={name:"FrameworkServiceSelect",props:{spaceName:{required:!0}},data(){return{services:[]}},methods:{fetchServices(){B({spaceName:this.spaceName,serviceTypes:["framework"]}).then(s=>{this.services=s}).catch(s=>{console.log("e",s)})}},created(){this.fetchServices()}};function W(s,l,u,d,o,i){const t=a("el-option"),n=a("el-select");return _(),p(n,{class:"framework-service-select"},{default:r(()=>[(_(!0),v(b,null,C(o.services,f=>(_(),p(t,{key:f.name,value:f.id,label:f.name},null,8,["value","label"]))),128))]),_:1})}const X=m(K,[["render",W],["__scopeId","data-v-9613f760"]]);const Y={components:{FrameworkServiceSelect:X,VersionSelect:J,DatabaseSelect:A,ServiceTypeSelect:P,CompilerSelect:U,SpaceSelect:z,I18nInput:N},data(){return{spaceName:null,space:null,form:{followServiceId:null,name:"",type:"framework",version:"v1",compiler:"static",supportedDatabases:[],description:""}}},methods:{create(){E({spaceId:this.space.id,...this.form}).then(s=>{this.$router.push({name:"ServiceSettings",query:{service_id:s}})}).catch(s=>{console.log("e",s)})},fetchSpace(){T(this.spaceName).then(s=>{this.space=s}).catch(s=>{console.log("e",s)})}},created(){this.spaceName=this.$route.query.space_name,this.fetchSpace()}},Z=s=>(q("data-v-0857a4f5"),s=s(),D(),s),ee={class:"form"},oe={class:"wrap"},le=Z(()=>S("h2",null,"Create Service",-1)),te={key:0,class:"tip"},se={class:"opera"};function ae(s,l,u,d,o,i){const t=a("el-input"),n=a("el-form-item"),f=a("ServiceTypeSelect"),y=a("VersionSelect"),h=a("FrameworkServiceSelect"),k=a("CompilerSelect"),w=a("DatabaseSelect"),I=a("I18nInput"),g=a("el-form"),x=a("el-button");return _(),v("div",ee,[S("div",oe,[le,o.space!=null?(_(),v("section",te,[V(" Create Service for "),S("em",null,$(o.space.name),1),V(". ")])):F("",!0),e(g,null,{default:r(()=>[e(n,{label:"Service Name",required:""},{default:r(()=>[e(t,{modelValue:o.form.name,"onUpdate:modelValue":l[0]||(l[0]=c=>o.form.name=c)},null,8,["modelValue"])]),_:1}),e(n,{label:"Service Type",required:""},{default:r(()=>[e(f,{modelValue:o.form.type,"onUpdate:modelValue":l[1]||(l[1]=c=>o.form.type=c)},null,8,["modelValue"])]),_:1}),o.form.type==="framework"?(_(),p(n,{key:0,label:"Version",required:""},{default:r(()=>[e(y,{modelValue:o.form.version,"onUpdate:modelValue":l[2]||(l[2]=c=>o.form.version=c)},null,8,["modelValue"])]),_:1})):(_(),v(b,{key:1},[e(n,{label:"Follow Framework Service",required:""},{default:r(()=>[e(h,{modelValue:o.form.followServiceId,"onUpdate:modelValue":l[3]||(l[3]=c=>o.form.followServiceId=c),"space-name":o.spaceName},null,8,["modelValue","space-name"])]),_:1}),e(n,{label:"Follow Framework Version",required:""},{default:r(()=>[e(y,{modelValue:o.form.version,"onUpdate:modelValue":l[4]||(l[4]=c=>o.form.version=c)},null,8,["modelValue"])]),_:1})],64)),e(n,{label:"Default Compiler",required:""},{default:r(()=>[e(k,{modelValue:o.form.compiler,"onUpdate:modelValue":l[5]||(l[5]=c=>o.form.compiler=c)},null,8,["modelValue"])]),_:1}),e(n,{label:"Supported Databases"},{default:r(()=>[e(w,{modelValue:o.form.supportedDatabases,"onUpdate:modelValue":l[6]||(l[6]=c=>o.form.supportedDatabases=c)},null,8,["modelValue"])]),_:1}),e(n,{label:"Repository"},{default:r(()=>[e(t,{modelValue:o.form.repository,"onUpdate:modelValue":l[7]||(l[7]=c=>o.form.repository=c)},null,8,["modelValue"])]),_:1}),e(n,{label:"Introduce",required:""},{default:r(()=>[e(I,{type:"textarea",modelValue:o.form.description,"onUpdate:modelValue":l[8]||(l[8]=c=>o.form.description=c)},null,8,["modelValue"])]),_:1})]),_:1}),S("div",se,[e(x,{type:"primary",size:"large",onClick:i.create},{default:r(()=>[V("Create Service")]),_:1},8,["onClick"])])])])}const pe=m(Y,[["render",ae],["__scopeId","data-v-0857a4f5"]]);export{pe as default};
