import{_ as d,r as s,o as l,g as _,w as r,b as t,e as m,c as y,f as g,F as N,T as x,S as I,a as S,t as C,j as h,p as M,l as T}from"./index-57c80a9e.js";import{C as k}from"./CompilerSelect-a16e8506.js";import{s as q}from"./service-0fddfd61.js";import{c as B}from"./user.service-1e5d6543.js";const w={name:"SpaceSelect"};function A(c,n,v,f,e,i){const o=s("el-option"),a=s("el-select");return l(),_(a,{class:"factory-select"},{default:r(()=>[t(o,{value:"1",label:"Eva-SpringBoot"}),t(o,{value:"2",label:"Eva-SpringCloud"})]),_:1})}const F=d(w,[["render",A],["__scopeId","data-v-dd51cda2"]]);const E={name:"ServiceTypeSelect"};function U(c,n,v,f,e,i){const o=s("el-radio"),a=s("el-radio-group");return l(),_(a,null,{default:r(()=>[t(o,{label:"MAIN"},{default:r(()=>[m("Main Service")]),_:1}),t(o,{label:"COMMON"},{default:r(()=>[m("Common Service")]),_:1})]),_:1})}const D=d(E,[["render",U],["__scopeId","data-v-c44d5132"]]);const O={name:"VersionSelect"};function P(c,n,v,f,e,i){const o=s("el-option"),a=s("el-select");return l(),_(a,{class:"version-select"},{default:r(()=>[t(o,{label:"V1",value:"v1"}),t(o,{label:"V2",value:"v2"}),t(o,{label:"V3",value:"v3"}),t(o,{label:"V4",value:"v4"}),t(o,{label:"V5",value:"v5"})]),_:1})}const j=d(O,[["render",P],["__scopeId","data-v-ba99869f"]]);const z={name:"MainServiceSelect",props:{space:{required:!0}},data(){return{services:[]}},methods:{fetchServices(){q({space:this.space,serviceType:"MAIN"}).then(c=>{this.services=c}).catch(c=>{this.$tip.apiFailed(c)})}},created(){this.fetchServices()}};function L(c,n,v,f,e,i){const o=s("el-option"),a=s("el-select");return l(),_(a,{class:"main-service-select"},{default:r(()=>[(l(!0),y(N,null,g(e.services,p=>(l(),_(o,{key:p.name,value:p.name,label:p.name},null,8,["value","label"]))),128))]),_:1})}const G=d(z,[["render",L],["__scopeId","data-v-05bd52ee"]]);const H={components:{MainServiceSelect:G,VersionSelect:j,DatabaseSelect:x,ServiceTypeSelect:D,CompilerSelect:k,SpaceSelect:F,I18nInput:I},data(){return{space:null,form:{name:"",type:"MAIN",mainServiceName:null,repository:"",introduce:""},rules:{name:[{required:!0,message:"Please input service name"}],mainServiceName:[{required:!0,message:"Please select main service"}]}}},methods:{create(){this.$refs.form.validate(c=>{c&&B({space:this.space,...this.form}).then(()=>{this.$router.push({name:"ServiceSettings",query:{space:this.space,service:this.form.name}})}).catch(n=>{this.$tip.apiFailed(n)})})}},created(){this.space=this.$route.query.space}},J=c=>(M("data-v-11317779"),c=c(),T(),c),K={class:"form"},Q={class:"wrap"},R=J(()=>S("h2",null,"Create Service",-1)),W={key:0,class:"tip"},X={class:"opera"};function Y(c,n,v,f,e,i){const o=s("el-input"),a=s("el-form-item"),p=s("ServiceTypeSelect"),b=s("MainServiceSelect"),V=s("el-form"),$=s("el-button");return l(),y("div",K,[S("div",Q,[R,e.space!=null?(l(),y("section",W,[m(" Create Service for "),S("em",null,C(e.space),1),m(". ")])):h("",!0),t(V,{ref:"form",model:e.form,rules:e.rules},{default:r(()=>[t(a,{label:"Service Name",prop:"name",required:""},{default:r(()=>[t(o,{modelValue:e.form.name,"onUpdate:modelValue":n[0]||(n[0]=u=>e.form.name=u)},null,8,["modelValue"])]),_:1}),t(a,{label:"Service Type",prop:"type",required:""},{default:r(()=>[t(p,{modelValue:e.form.type,"onUpdate:modelValue":n[1]||(n[1]=u=>e.form.type=u)},null,8,["modelValue"])]),_:1}),e.form.type!=="MAIN"?(l(),_(a,{key:0,label:"Main Service",prop:"mainServiceName",required:""},{default:r(()=>[t(b,{modelValue:e.form.mainServiceName,"onUpdate:modelValue":n[2]||(n[2]=u=>e.form.mainServiceName=u),space:e.space},null,8,["modelValue","space"])]),_:1})):h("",!0)]),_:1},8,["model","rules"]),S("div",X,[t($,{type:"primary",size:"large",onClick:i.create},{default:r(()=>[m("Create Service")]),_:1},8,["onClick"])])])])}const ce=d(H,[["render",Y],["__scopeId","data-v-11317779"]]);export{ce as default};
