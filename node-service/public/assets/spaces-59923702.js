import{s as z}from"./service.space-8254cc9f.js";import{P as x}from"./Pagination-f2621c08.js";import{_ as V,E as b,r as c,q as D,o as a,c as i,b as e,d as p,w as g,k as E,u,f as h,v as N,F as m,x as C,g as P,t as r,e as B,y as F}from"./index-f2a25bd4.js";const I={components:{Empty:b,Pagination:x},data(){return{loading:!1,keyword:"",pagination:{pageIndex:1,pageCount:0,capacity:15,total:0},spaces:[]}},methods:{search(){this.loading||(this.loading=!0,z({...this.pagination,model:{keyword:this.keyword}}).then(n=>{this.pagination.total=n.total,this.pagination.pageCount=n.pageCount,this.spaces=n.records,console.log("data.records",n.records)}).catch(n=>{this.$tip.apiFailed(n)}).finally(()=>{this.loading=!1}))},handleSizeChange(n){this.pagination.capacity=n,this.search()},handleCurrentChange(n){this.pagination.pageIndex=n,this.search()}},created(){this.search()}},K={class:"page"},L={class:"warp"},q={class:"search-wrap"},j={class:"input-wrap"},M={key:1,class:"space-list"},T=["onClick"],U={class:"service-list"},A=["onClick"],G={class:"infos"},H={class:"infos text-info-1"},J={class:"user-profile"},O={key:0,src:F},Q=["src"];function R(n,d,W,X,t,l){const y=c("Search"),k=c("el-icon"),f=c("el-input"),v=c("el-button"),_=c("Pagination"),S=c("Empty"),w=D("loading");return a(),i("div",K,[e("div",L,[e("div",q,[e("div",j,[p(k,{size:"20"},{default:g(()=>[p(y)]),_:1}),p(f,{modelValue:t.keyword,"onUpdate:modelValue":d[0]||(d[0]=s=>t.keyword=s),size:"large",placeholder:"Search spaces & services",onKeypress:E(l.search,["enter","native"])},null,8,["modelValue","onKeypress"])]),p(v,{size:"large",type:"primary",onClick:l.search},{default:g(()=>[P("Search")]),_:1},8,["onClick"])]),t.pagination.pageCount>1?(a(),u(_,{key:0,pagination:t.pagination,position:"top",onCurrentChange:l.handleCurrentChange,onSizeChange:l.handleSizeChange},null,8,["pagination","onCurrentChange","onSizeChange"])):h("",!0),t.loading||t.spaces.length>0?N((a(),i("ul",M,[(a(!0),i(m,null,C(t.spaces,s=>(a(),i("li",{key:s.id},[e("a",{href:"javascript:;",onClick:o=>n.$router.push({name:"SpaceDetail",params:{name:s.name}})},[e("h3",null,r(s.name),1),e("p",null,r(s.introduce),1),e("ul",U,[(a(!0),i(m,null,C(s.mainServices,o=>(a(),i("li",{key:o.id,onClick:B(Y=>n.$router.push({name:"SpaceDetail",params:{name:s.name},query:{service:o.name}}),["stop"])},[e("h4",null,r(o.name),1),e("p",null,r(o.introduce),1),e("section",G,[e("p",null,r(o.subServiceCount)+" sub services",1),e("p",null,"Latest version: "+r(o.lastVersion),1)]),e("section",H,[e("p",null,"Last publish: "+r(o.lastPublish),1)])],8,A))),128))]),e("div",J,[s.user.avatar==null?(a(),i("img",O)):(a(),i("img",{key:1,src:s.user.avatar},null,8,Q)),e("span",null,r(s.user.nickname),1)])],8,T)]))),128))])),[[w,t.loading]]):h("",!0),t.keyword.trim()!==""&&t.spaces.length===0?(a(),u(S,{key:2,description:"Not Found Spaces"})):h("",!0),t.pagination.pageCount>1?(a(),u(_,{key:3,pagination:t.pagination,onCurrentChange:l.handleCurrentChange,onSizeChange:l.handleSizeChange},null,8,["pagination","onCurrentChange","onSizeChange"])):h("",!0)])])}const ne=V(I,[["render",R],["__scopeId","data-v-03996af3"]]);export{ne as default};
