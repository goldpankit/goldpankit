import{n as b,_ as y,r as m,o as r,c as d,b as i,d as t,w as n,e as D,F as f,g as a,t as h,f as v,p as V,h as C}from"./index-f2a25bd4.js";function w(s){return b.post("/usr/regis/mobile",s)}function I(s){return b.post("/usr/regis/mobile/sms",s)}const x={data(){return{form:{username:"",password:"",mobile:"",smsId:null,smsCode:""},sendSmsData:{isWorking:!1,timeout:0,sended:!1},regisData:{isWorking:!1}}},methods:{regis(){this.$refs.form.validate().then(()=>{this.regisData.isWorking||(this.regisData.isWorking=!0,w(this.form).then(()=>{this.$message.info("Register successful."),this.$router.push({name:"SignIn"})}).catch(s=>{this.$tip.apiFailed(s)}).finally(()=>{this.regisData.isWorking=!1}))}).catch(()=>{})},sendSms(){this.$refs.form.validateField("mobile").then(()=>{this.sendSmsData.isWorking||(this.sendSmsData.isWorking=!0,I({mobile:this.form.mobile}).then(s=>{this.form.smsId=s,this.sendSmsData.timeout=60,this.sendSmsData.sended=!0;const o=setInterval(()=>{this.sendSmsData.timeout--,this.sendSmsData.timeout===0&&clearInterval(o)},1e3)}).catch(s=>{this.$tip.apiFailed(s)}).finally(()=>{this.sendSmsData.isWorking=!1}))}).catch(()=>{})}}},c=s=>(V("data-v-ab25607f"),s=s(),C(),s),W={class:"signup"},U={class:"wrap"},z=c(()=>i("h2",null,"Sign Up",-1)),B=c(()=>i("span",null,"+86",-1)),F={key:0},M={class:"login-box"},q={class:"have-an-account"},N=c(()=>i("p",null,"Already have an account?",-1));function R(s,o,A,E,e,_){const u=m("el-input"),p=m("el-form-item"),g=m("el-button"),S=m("el-form"),k=m("router-link");return r(),d("div",W,[i("div",U,[z,t(S,{ref:"form",model:e.form,onSubmit:o[4]||(o[4]=D(()=>{},["stop"]))},{default:n(()=>[t(p,{label:"Username",prop:"username",required:""},{default:n(()=>[t(u,{modelValue:e.form.username,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.username=l),type:"text",size:"large"},null,8,["modelValue"])]),_:1}),t(p,{label:"Password",prop:"password",required:""},{default:n(()=>[t(u,{modelValue:e.form.password,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.password=l),type:"password",size:"large"},null,8,["modelValue"])]),_:1}),t(p,{label:"Mobile",prop:"mobile",required:""},{default:n(()=>[t(u,{modelValue:e.form.mobile,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.mobile=l),type:"text",size:"large"},{prepend:n(()=>[B]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"Mobile Code",prop:"smsCode",required:"",class:"mobile-code"},{default:n(()=>[i("div",null,[t(u,{type:"text",modelValue:e.form.smsCode,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.smsCode=l),size:"large"},null,8,["modelValue"]),t(g,{size:"large",type:"primary",disabled:e.sendSmsData.isWorking||e.sendSmsData.timeout!==0,onClick:_.sendSms},{default:n(()=>[e.sendSmsData.isWorking?(r(),d(f,{key:0},[a("Sending...")],64)):e.sendSmsData.timeout===0&&!e.sendSmsData.sended?(r(),d(f,{key:1},[a("Send Code")],64)):e.sendSmsData.timeout===0&&e.sendSmsData.sended?(r(),d(f,{key:2},[a("Resend Code")],64)):(r(),d(f,{key:3},[a(h(e.sendSmsData.timeout)+"s",1)],64))]),_:1},8,["disabled","onClick"])]),e.sendSmsData.sended?(r(),d("p",F,[a("tips: we sended a message to your mobile phone for number "),i("em",null,h(this.form.mobile),1),a(".you can resend if you are not received our message .")])):v("",!0)]),_:1})]),_:1},8,["model"]),i("div",M,[i("div",null,[t(g,{type:"important",onClick:_.regis,disabled:e.regisData.isWorking},{default:n(()=>[a("Create an account")]),_:1},8,["onClick","disabled"])])])]),i("div",q,[N,t(k,{to:{name:"SignIn"}},{default:n(()=>[a("Sign In")]),_:1})])])}const T=y(x,[["render",R],["__scopeId","data-v-ab25607f"]]);export{T as default};
