import{I as k,a as C}from"./InnerRouterViewWindow-129d0f04.js";import{n as V,_ as y,r as l,o as c,g as D,w as t,a as i,b as a,e as s,t as o,B as S,C as E,E as F,D as I,G as W,c as m,F as B,f as M}from"./index-42b6b834.js";import{P as N}from"./Pagination-5e945245.js";const T={name:"DatabaseView",props:{database:{required:!0}},methods:{...V(["setCurrentDatabase"]),gotoQueryModels(){this.setCurrentDatabase(this.database.id),this.$router.push({name:"DatabaseQueryModel"})}}},P={class:"toolbar"};function z(e,n,r,$,b,u){const d=l("el-descriptions-item"),_=l("el-button"),h=l("el-descriptions");return c(),D(h,{title:r.database.name},{extra:t(()=>[i("ul",P,[i("li",null,[a(_,{size:"small",onClick:u.gotoQueryModels},{default:t(()=>[s(o(e.$t("database.queryModels")),1)]),_:1},8,["onClick"])]),i("li",null,[a(_,{size:"small",icon:"Edit",onClick:n[0]||(n[0]=f=>e.$emit("edit"))},{default:t(()=>[s(o(e.$t("common.edit")),1)]),_:1})]),i("li",null,[a(_,{size:"small",type:"danger",text:"",onClick:n[1]||(n[1]=f=>e.$emit("delete"))},{default:t(()=>[s(o(e.$t("common.delete")),1)]),_:1})])])]),default:t(()=>[a(d,{label:e.$t("database.databaseType")},{default:t(()=>[s(o(r.database.type),1)]),_:1},8,["label"]),a(d,{label:e.$t("database.host")},{default:t(()=>[s(o(r.database.host),1)]),_:1},8,["label"]),a(d,{label:e.$t("database.port")},{default:t(()=>[s(o(r.database.port),1)]),_:1},8,["label"]),a(d,{label:e.$t("database.schema")},{default:t(()=>[s(o(r.database.schema),1)]),_:1},8,["label"]),a(d,{label:e.$t("database.username")},{default:t(()=>[s(o(r.database.username),1)]),_:1},8,["label"]),a(d,{label:e.$t("database.password")},{default:t(()=>[s("******")]),_:1},8,["label"])]),_:1},8,["title"])}const O=y(T,[["render",z],["__scopeId","data-v-e8c5ce5c"]]);const Q={components:{FormTip:S,OperaDataSourceWindow:E,Pagination:N,Empty:F,DatabaseView:O,InnerRouterViewWindow:k,InnerRouterView:C},data(){return{databases:[],pagination:{pageIndex:1,capacity:10,total:0}}},methods:{search(){I(this.pagination).then(e=>{this.databases=e.records}).catch(e=>{this.$tip.apiFailed(e)})},edit(e){this.$refs.operaDataSourceWindow.open(e)},deleteDatabase(e){this.deleteConfirm("Do you want to delete the database?").then(()=>{W(e).then(()=>{this.search()}).catch(n=>{this.$tip.apiFailed(n)})}).catch(()=>{})}},created(){this.search()}},q={class:"form"},R={class:"wrap"},G={class:"database-list-wrap"},L={class:"toolbar"},j={key:0,class:"database-list"};function A(e,n,r,$,b,u){const d=l("FormTip"),_=l("el-button"),h=l("DatabaseView"),f=l("Empty"),w=l("Pagination"),g=l("OperaDataSourceWindow");return c(),m("div",q,[i("div",R,[i("h2",null,o(e.$t("database.databases")),1),a(d,null,{default:t(()=>[s(o(e.$t("database.tip")),1)]),_:1}),i("div",G,[i("ul",L,[i("li",null,[a(_,{type:"primary",onClick:n[0]||(n[0]=p=>e.$refs.operaDataSourceWindow.open())},{default:t(()=>[s(o(e.$t("database.addNewDatabase")),1)]),_:1})])]),b.databases.length>0?(c(),m("ul",j,[(c(!0),m(B,null,M(b.databases,p=>(c(),m("li",{key:p.name},[a(h,{database:p,onEdit:v=>u.edit(p),onDelete:v=>u.deleteDatabase(p.id)},null,8,["database","onEdit","onDelete"])]))),128))])):(c(),D(f,{key:1,description:"No Databases"})),a(w,{pagination:b.pagination},null,8,["pagination"])])]),a(g,{ref:"operaDataSourceWindow",onSuccess:u.search},null,8,["onSuccess"])])}const U=y(Q,[["render",A],["__scopeId","data-v-20885975"]]);export{U as default};
